
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Lutris desktop client in Python / PyGObject.">
      
      
      
        <link rel="canonical" href="https://lutris.github.io/lutris/reference/lutris/util/wine/">
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.5">
    
    
      
        <title>Index - Lutris</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lutris.util.wine" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Lutris" class="md-header__button md-logo" aria-label="Lutris" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lutris
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Index
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/lutris/lutris/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    lutris/lutris
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../wiki/Home/" class="md-tabs__link">
        Wiki
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        Reference
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../contributing/" class="md-tabs__link">
        Development
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Lutris" class="md-nav__button md-logo" aria-label="Lutris" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Lutris
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lutris/lutris/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    lutris/lutris
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../credits/" class="md-nav__link">
        Credits
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../license/" class="md-nav__link">
        License
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Wiki
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Wiki" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Wiki
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../wiki/Home/" class="md-nav__link">
        Home
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/Apitracing/" class="md-nav__link">
        Apitracing a game
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/Battle.Net/" class="md-nav__link">
        Battle.Net
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/HowToDXVK/" class="md-nav__link">
        What is DXVK?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/HowToEsync/" class="md-nav__link">
        What is Esync?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/InstallingDrivers/" class="md-nav__link">
        InstallingDrivers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/LutrisRuntime/" class="md-nav__link">
        LutrisRuntime
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/Origin/" class="md-nav__link">
        Origin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/Overwatch/" class="md-nav__link">
        Overwatch on Linux (Wine)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/Performance-Tweaks/" class="md-nav__link">
        Performance Tweaks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/PressureVesselResearch/" class="md-nav__link">
        Pressure Vessel Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/ProvidingLogs%26SystemInfo/" class="md-nav__link">
        What we need to help you (TLDR):
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/RetroArch/" class="md-nav__link">
        RetroArch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/WineBuilds/" class="md-nav__link">
        Wine Builds
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/WineDependencies/" class="md-nav__link">
        WineDependencies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/WorldOfWarcraft/" class="md-nav__link">
        World of Warcraft
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lutris_docs/titanfall-2/" class="md-nav__link">
        Titanfall 2 on Linux
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          lutris
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="lutris" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          lutris
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        api
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cache/" class="md-nav__link">
        cache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../command/" class="md-nav__link">
        command
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/" class="md-nav__link">
        config
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_6" type="checkbox" id="__nav_3_1_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_6">
          database
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="database" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_6">
          <span class="md-nav__icon md-icon"></span>
          database
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../database/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../database/categories/" class="md-nav__link">
        categories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../database/games/" class="md-nav__link">
        games
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../database/schema/" class="md-nav__link">
        schema
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../database/services/" class="md-nav__link">
        services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../database/sources/" class="md-nav__link">
        sources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../database/sql/" class="md-nav__link">
        sql
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../discord/" class="md-nav__link">
        discord
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../exceptions/" class="md-nav__link">
        exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../game/" class="md-nav__link">
        game
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../game_actions/" class="md-nav__link">
        game_actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_11" type="checkbox" id="__nav_3_1_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_11">
          gui
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="gui" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_11">
          <span class="md-nav__icon md-icon"></span>
          gui
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/addgameswindow/" class="md-nav__link">
        addgameswindow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/application/" class="md-nav__link">
        application
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_11_4" type="checkbox" id="__nav_3_1_11_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_11_4">
          config
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="config" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_11_4">
          <span class="md-nav__icon md-icon"></span>
          config
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/config/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/config/add_game/" class="md-nav__link">
        add_game
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/config/base_config_box/" class="md-nav__link">
        base_config_box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/config/boxes/" class="md-nav__link">
        boxes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/config/common/" class="md-nav__link">
        common
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/config/edit_game/" class="md-nav__link">
        edit_game
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/config/preferences_box/" class="md-nav__link">
        preferences_box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/config/preferences_dialog/" class="md-nav__link">
        preferences_dialog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/config/runner/" class="md-nav__link">
        runner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/config/runner_box/" class="md-nav__link">
        runner_box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/config/runners_box/" class="md-nav__link">
        runners_box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/config/services_box/" class="md-nav__link">
        services_box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/config/sysinfo_box/" class="md-nav__link">
        sysinfo_box
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_11_5" type="checkbox" id="__nav_3_1_11_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_11_5">
          dialogs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="dialogs" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_11_5">
          <span class="md-nav__icon md-icon"></span>
          dialogs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/dialogs/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/dialogs/cache/" class="md-nav__link">
        cache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/dialogs/download/" class="md-nav__link">
        download
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/dialogs/issue/" class="md-nav__link">
        issue
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/dialogs/log/" class="md-nav__link">
        log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/dialogs/runner_install/" class="md-nav__link">
        runner_install
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/dialogs/uninstall_game/" class="md-nav__link">
        uninstall_game
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/dialogs/webconnect_dialog/" class="md-nav__link">
        webconnect_dialog
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_11_6" type="checkbox" id="__nav_3_1_11_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_11_6">
          installer
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="installer" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_11_6">
          <span class="md-nav__icon md-icon"></span>
          installer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/installer/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/installer/file_box/" class="md-nav__link">
        file_box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/installer/files_box/" class="md-nav__link">
        files_box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/installer/script_box/" class="md-nav__link">
        script_box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/installer/script_picker/" class="md-nav__link">
        script_picker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/installer/widgets/" class="md-nav__link">
        widgets
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/installerwindow/" class="md-nav__link">
        installerwindow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/lutriswindow/" class="md-nav__link">
        lutriswindow
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_11_9" type="checkbox" id="__nav_3_1_11_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_11_9">
          views
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="views" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_11_9">
          <span class="md-nav__icon md-icon"></span>
          views
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/views/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/views/base/" class="md-nav__link">
        base
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/views/grid/" class="md-nav__link">
        grid
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/views/list/" class="md-nav__link">
        list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/views/media_loader/" class="md-nav__link">
        media_loader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/views/store/" class="md-nav__link">
        store
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/views/store_item/" class="md-nav__link">
        store_item
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_11_10" type="checkbox" id="__nav_3_1_11_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_11_10">
          widgets
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="widgets" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_11_10">
          <span class="md-nav__icon md-icon"></span>
          widgets
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/widgets/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/widgets/cellrenderers/" class="md-nav__link">
        cellrenderers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/widgets/common/" class="md-nav__link">
        common
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/widgets/contextual_menu/" class="md-nav__link">
        contextual_menu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/widgets/download_progress_box/" class="md-nav__link">
        download_progress_box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/widgets/game_bar/" class="md-nav__link">
        game_bar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/widgets/gi_composites/" class="md-nav__link">
        gi_composites
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/widgets/log_text_view/" class="md-nav__link">
        log_text_view
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/widgets/notifications/" class="md-nav__link">
        notifications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/widgets/searchable_combobox/" class="md-nav__link">
        searchable_combobox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/widgets/sidebar/" class="md-nav__link">
        sidebar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/widgets/status_icon/" class="md-nav__link">
        status_icon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/widgets/utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/widgets/window/" class="md-nav__link">
        window
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_12" type="checkbox" id="__nav_3_1_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_12">
          installer
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="installer" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_12">
          <span class="md-nav__icon md-icon"></span>
          installer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installer/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installer/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installer/errors/" class="md-nav__link">
        errors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installer/installer/" class="md-nav__link">
        installer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installer/installer_file/" class="md-nav__link">
        installer_file
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installer/interpreter/" class="md-nav__link">
        interpreter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installer/legacy/" class="md-nav__link">
        legacy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installer/steam_installer/" class="md-nav__link">
        steam_installer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_13" type="checkbox" id="__nav_3_1_13" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_13">
          migrations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="migrations" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_13">
          <span class="md-nav__icon md-icon"></span>
          migrations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/mess_to_mame/" class="md-nav__link">
        mess_to_mame
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/migrate_banners/" class="md-nav__link">
        migrate_banners
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/migrate_hidden_ids/" class="md-nav__link">
        migrate_hidden_ids
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/migrate_steam_appids/" class="md-nav__link">
        migrate_steam_appids
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runner_interpreter/" class="md-nav__link">
        runner_interpreter
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_15" type="checkbox" id="__nav_3_1_15" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_15">
          runners
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="runners" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_15">
          <span class="md-nav__icon md-icon"></span>
          runners
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/atari800/" class="md-nav__link">
        atari800
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_15_3" type="checkbox" id="__nav_3_1_15_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_15_3">
          commands
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="commands" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_15_3">
          <span class="md-nav__icon md-icon"></span>
          commands
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/commands/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/commands/dosbox/" class="md-nav__link">
        dosbox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/commands/wine/" class="md-nav__link">
        wine
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/dolphin/" class="md-nav__link">
        dolphin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/dosbox/" class="md-nav__link">
        dosbox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/easyrpg/" class="md-nav__link">
        easyrpg
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/fsuae/" class="md-nav__link">
        fsuae
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/hatari/" class="md-nav__link">
        hatari
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/json/" class="md-nav__link">
        json
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/jzintv/" class="md-nav__link">
        jzintv
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/libretro/" class="md-nav__link">
        libretro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/linux/" class="md-nav__link">
        linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/mame/" class="md-nav__link">
        mame
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/mednafen/" class="md-nav__link">
        mednafen
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/mupen64plus/" class="md-nav__link">
        mupen64plus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/o2em/" class="md-nav__link">
        o2em
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/openmsx/" class="md-nav__link">
        openmsx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/osmose/" class="md-nav__link">
        osmose
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/pcsx2/" class="md-nav__link">
        pcsx2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/pico8/" class="md-nav__link">
        pico8
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/redream/" class="md-nav__link">
        redream
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/reicast/" class="md-nav__link">
        reicast
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/residualvm/" class="md-nav__link">
        residualvm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/rpcs3/" class="md-nav__link">
        rpcs3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/runner/" class="md-nav__link">
        runner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/ryujinx/" class="md-nav__link">
        ryujinx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/scummvm/" class="md-nav__link">
        scummvm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/snes9x/" class="md-nav__link">
        snes9x
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/steam/" class="md-nav__link">
        steam
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/vice/" class="md-nav__link">
        vice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/web/" class="md-nav__link">
        web
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/wine/" class="md-nav__link">
        wine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/yuzu/" class="md-nav__link">
        yuzu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/zdoom/" class="md-nav__link">
        zdoom
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime/" class="md-nav__link">
        runtime
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_17" type="checkbox" id="__nav_3_1_17" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_17">
          scanners
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="scanners" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_17">
          <span class="md-nav__icon md-icon"></span>
          scanners
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../scanners/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../scanners/lutris/" class="md-nav__link">
        lutris
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../scanners/retroarch/" class="md-nav__link">
        retroarch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_18" type="checkbox" id="__nav_3_1_18" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_18">
          services
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="services" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_18">
          <span class="md-nav__icon md-icon"></span>
          services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/base/" class="md-nav__link">
        base
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/battlenet/" class="md-nav__link">
        battlenet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bethesda/" class="md-nav__link">
        bethesda
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/dolphin/" class="md-nav__link">
        dolphin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/egs/" class="md-nav__link">
        egs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/gog/" class="md-nav__link">
        gog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/humblebundle/" class="md-nav__link">
        humblebundle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/itchio/" class="md-nav__link">
        itchio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/lutris/" class="md-nav__link">
        lutris
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/mame/" class="md-nav__link">
        mame
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/origin/" class="md-nav__link">
        origin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scummvm/" class="md-nav__link">
        scummvm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/service_game/" class="md-nav__link">
        service_game
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/service_media/" class="md-nav__link">
        service_media
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/steam/" class="md-nav__link">
        steam
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/steamwindows/" class="md-nav__link">
        steamwindows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/tosec/" class="md-nav__link">
        tosec
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/ubisoft/" class="md-nav__link">
        ubisoft
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../services/xdg/" class="md-nav__link">
        xdg
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/" class="md-nav__link">
        settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../startup/" class="md-nav__link">
        startup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../style_manager/" class="md-nav__link">
        style_manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sysoptions/" class="md-nav__link">
        sysoptions
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_23" type="checkbox" id="__nav_3_1_23" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_23">
          util
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="util" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_23">
          <span class="md-nav__icon md-icon"></span>
          util
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../audio/" class="md-nav__link">
        audio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cookies/" class="md-nav__link">
        cookies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../datapath/" class="md-nav__link">
        datapath
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../display/" class="md-nav__link">
        display
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_23_6" type="checkbox" id="__nav_3_1_23_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_23_6">
          dolphin
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="dolphin" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_23_6">
          <span class="md-nav__icon md-icon"></span>
          dolphin
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dolphin/" class="md-nav__link">
        Dolphin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dolphin/cache_reader/" class="md-nav__link">
        cache_reader
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../downloader/" class="md-nav__link">
        downloader
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_23_8" type="checkbox" id="__nav_3_1_23_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_23_8">
          egs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="egs" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_23_8">
          <span class="md-nav__icon md-icon"></span>
          egs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../egs/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../egs/egs_launcher/" class="md-nav__link">
        egs_launcher
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../extract/" class="md-nav__link">
        extract
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fileio/" class="md-nav__link">
        fileio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../game_finder/" class="md-nav__link">
        game_finder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gamecontrollerdb/" class="md-nav__link">
        gamecontrollerdb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gog/" class="md-nav__link">
        gog
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_23_14" type="checkbox" id="__nav_3_1_23_14" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_23_14">
          graphics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="graphics" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_23_14">
          <span class="md-nav__icon md-icon"></span>
          graphics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graphics/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graphics/displayconfig/" class="md-nav__link">
        displayconfig
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graphics/drivers/" class="md-nav__link">
        drivers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graphics/glxinfo/" class="md-nav__link">
        glxinfo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graphics/vkquery/" class="md-nav__link">
        vkquery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graphics/xephyr/" class="md-nav__link">
        xephyr
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graphics/xrandr/" class="md-nav__link">
        xrandr
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../http/" class="md-nav__link">
        http
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../i18n/" class="md-nav__link">
        i18n
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jobs/" class="md-nav__link">
        jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../joypad/" class="md-nav__link">
        joypad
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../keyring/" class="md-nav__link">
        keyring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../libretro/" class="md-nav__link">
        libretro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../linux/" class="md-nav__link">
        linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../log/" class="md-nav__link">
        log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../magic/" class="md-nav__link">
        magic
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_23_24" type="checkbox" id="__nav_3_1_23_24" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_23_24">
          mame
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="mame" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_23_24">
          <span class="md-nav__icon md-icon"></span>
          mame
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mame/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mame/database/" class="md-nav__link">
        database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mame/ini/" class="md-nav__link">
        ini
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nvidia/" class="md-nav__link">
        nvidia
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../process/" class="md-nav__link">
        process
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../process_watcher/" class="md-nav__link">
        process_watcher
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../resources/" class="md-nav__link">
        resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_23_29" type="checkbox" id="__nav_3_1_23_29" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_23_29">
          retroarch
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="retroarch" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_23_29">
          <span class="md-nav__icon md-icon"></span>
          retroarch
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../retroarch/core_config/" class="md-nav__link">
        core_config
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../settings/" class="md-nav__link">
        settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../shell/" class="md-nav__link">
        shell
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_23_32" type="checkbox" id="__nav_3_1_23_32" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_23_32">
          steam
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="steam" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_23_32">
          <span class="md-nav__icon md-icon"></span>
          steam
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../steam/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../steam/appmanifest/" class="md-nav__link">
        appmanifest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../steam/config/" class="md-nav__link">
        config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../steam/log/" class="md-nav__link">
        log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../steam/vdf/" class="md-nav__link">
        vdf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../steam/watcher/" class="md-nav__link">
        watcher
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../strings/" class="md-nav__link">
        strings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../system/" class="md-nav__link">
        system
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test_config/" class="md-nav__link">
        test_config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../timer/" class="md-nav__link">
        timer
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_23_37" type="checkbox" id="__nav_3_1_23_37" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_23_37">
          ubisoft
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ubisoft" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_23_37">
          <span class="md-nav__icon md-icon"></span>
          ubisoft
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ubisoft/client/" class="md-nav__link">
        client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ubisoft/consts/" class="md-nav__link">
        consts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ubisoft/helpers/" class="md-nav__link">
        helpers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ubisoft/parser/" class="md-nav__link">
        parser
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../update_cache/" class="md-nav__link">
        update_cache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../urlhandler/" class="md-nav__link">
        urlhandler
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_23_40" type="checkbox" id="__nav_3_1_23_40" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_23_40">
          wine
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="wine" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_23_40">
          <span class="md-nav__icon md-icon"></span>
          wine
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Index
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Index
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine" class="md-nav__link">
    lutris.util.wine
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall" class="md-nav__link">
    cabinstall
  </a>
  
    <nav class="md-nav" aria-label="cabinstall">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller" class="md-nav__link">
    CabInstaller
  </a>
  
    <nav class="md-nav" aria-label="CabInstaller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.apply_to_registry" class="md-nav__link">
    apply_to_registry()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.check_dll_arch" class="md-nav__link">
    check_dll_arch()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.cleanup" class="md-nav__link">
    cleanup()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.extract_from_cab" class="md-nav__link">
    extract_from_cab()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_arch_from_dll" class="md-nav__link">
    get_arch_from_dll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_arch_from_manifest" class="md-nav__link">
    get_arch_from_manifest()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_dll_destdir" class="md-nav__link">
    get_dll_destdir()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_registry_files" class="md-nav__link">
    get_registry_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_registry_from_manifest" class="md-nav__link">
    get_registry_from_manifest()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_system32_realdir" class="md-nav__link">
    get_system32_realdir()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_winebin" class="md-nav__link">
    get_winebin()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_wineprefix_arch" class="md-nav__link">
    get_wineprefix_arch()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.install" class="md-nav__link">
    install()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.install_dll" class="md-nav__link">
    install_dll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.process_key" class="md-nav__link">
    process_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.process_value" class="md-nav__link">
    process_value()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.replace_variables" class="md-nav__link">
    replace_variables()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.d3d_extras" class="md-nav__link">
    d3d_extras
  </a>
  
    <nav class="md-nav" aria-label="d3d_extras">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.d3d_extras.D3DExtrasManager" class="md-nav__link">
    D3DExtrasManager
  </a>
  
    <nav class="md-nav" aria-label="D3DExtrasManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.base_dir" class="md-nav__link">
    base_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.component" class="md-nav__link">
    component
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.managed_dlls" class="md-nav__link">
    managed_dlls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.releases_url" class="md-nav__link">
    releases_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.versions_path" class="md-nav__link">
    versions_path
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2" class="md-nav__link">
    dgvoodoo2
  </a>
  
    <nav class="md-nav" aria-label="dgvoodoo2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager" class="md-nav__link">
    dgvoodoo2Manager
  </a>
  
    <nav class="md-nav" aria-label="dgvoodoo2Manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.base_dir" class="md-nav__link">
    base_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.component" class="md-nav__link">
    component
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.managed_appdata_files" class="md-nav__link">
    managed_appdata_files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.managed_dlls" class="md-nav__link">
    managed_dlls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.releases_url" class="md-nav__link">
    releases_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.versions_path" class="md-nav__link">
    versions_path
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager" class="md-nav__link">
    dll_manager
  </a>
  
    <nav class="md-nav" aria-label="dll_manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager" class="md-nav__link">
    DLLManager
  </a>
  
    <nav class="md-nav" aria-label="DLLManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.archs" class="md-nav__link">
    archs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.base_dir" class="md-nav__link">
    base_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.component" class="md-nav__link">
    component
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.managed_appdata_files" class="md-nav__link">
    managed_appdata_files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.managed_dlls" class="md-nav__link">
    managed_dlls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.path" class="md-nav__link">
    path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.releases_url" class="md-nav__link">
    releases_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.version" class="md-nav__link">
    version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.version_choices" class="md-nav__link">
    version_choices
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.versions" class="md-nav__link">
    versions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.versions_path" class="md-nav__link">
    versions_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.disable" class="md-nav__link">
    disable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.disable_dll" class="md-nav__link">
    disable_dll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.disable_user_file" class="md-nav__link">
    disable_user_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.dll_exists" class="md-nav__link">
    dll_exists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.download" class="md-nav__link">
    download()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.enable" class="md-nav__link">
    enable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.enable_dll" class="md-nav__link">
    enable_dll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.enable_user_file" class="md-nav__link">
    enable_user_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.fetch_versions" class="md-nav__link">
    fetch_versions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.get_download_url" class="md-nav__link">
    get_download_url()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.is_available" class="md-nav__link">
    is_available()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.is_managed_dll" class="md-nav__link">
    is_managed_dll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.load_versions" class="md-nav__link">
    load_versions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.upgrade" class="md-nav__link">
    upgrade()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk" class="md-nav__link">
    dxvk
  </a>
  
    <nav class="md-nav" aria-label="dxvk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk.DXVKManager" class="md-nav__link">
    DXVKManager
  </a>
  
    <nav class="md-nav" aria-label="DXVKManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk.DXVKManager.base_dir" class="md-nav__link">
    base_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk.DXVKManager.component" class="md-nav__link">
    component
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk.DXVKManager.managed_dlls" class="md-nav__link">
    managed_dlls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk.DXVKManager.releases_url" class="md-nav__link">
    releases_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk.DXVKManager.versions_path" class="md-nav__link">
    versions_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk.DXVKManager.is_managed_dll" class="md-nav__link">
    is_managed_dll()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi" class="md-nav__link">
    dxvk_nvapi
  </a>
  
    <nav class="md-nav" aria-label="dxvk_nvapi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager" class="md-nav__link">
    DXVKNVAPIManager
  </a>
  
    <nav class="md-nav" aria-label="DXVKNVAPIManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.base_dir" class="md-nav__link">
    base_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.component" class="md-nav__link">
    component
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.dlss_dlls" class="md-nav__link">
    dlss_dlls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.managed_dlls" class="md-nav__link">
    managed_dlls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.releases_url" class="md-nav__link">
    releases_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.versions_path" class="md-nav__link">
    versions_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.disable" class="md-nav__link">
    disable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.disable_dll" class="md-nav__link">
    disable_dll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.enable" class="md-nav__link">
    enable()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync" class="md-nav__link">
    fsync
  </a>
  
    <nav class="md-nav" aria-label="fsync">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.__all__" class="md-nav__link">
    __all__
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.futex_waitv" class="md-nav__link">
    futex_waitv
  </a>
  
    <nav class="md-nav" aria-label="futex_waitv">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.futex_waitv.__slots__" class="md-nav__link">
    __slots__
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.timespec" class="md-nav__link">
    timespec
  </a>
  
    <nav class="md-nav" aria-label="timespec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.timespec.__slots__" class="md-nav__link">
    __slots__
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.is_fsync_supported" class="md-nav__link">
    is_fsync_supported()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.is_futex2_supported" class="md-nav__link">
    is_futex2_supported()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.is_futex_wait_multiple_supported" class="md-nav__link">
    is_futex_wait_multiple_supported()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.is_futex_waitv_supported" class="md-nav__link">
    is_futex_waitv_supported()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix" class="md-nav__link">
    prefix
  </a>
  
    <nav class="md-nav" aria-label="prefix">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.DEFAULT_DESKTOP_FOLDERS" class="md-nav__link">
    DEFAULT_DESKTOP_FOLDERS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.DEFAULT_DLL_OVERRIDES" class="md-nav__link">
    DEFAULT_DLL_OVERRIDES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.DESKTOP_KEYS" class="md-nav__link">
    DESKTOP_KEYS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.DESKTOP_XDG" class="md-nav__link">
    DESKTOP_XDG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager" class="md-nav__link">
    WinePrefixManager
  </a>
  
    <nav class="md-nav" aria-label="WinePrefixManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.appdata_dir" class="md-nav__link">
    appdata_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.hkcu_prefix" class="md-nav__link">
    hkcu_prefix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.hklm_prefix" class="md-nav__link">
    hklm_prefix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.user_dir" class="md-nav__link">
    user_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.clear_registry_key" class="md-nav__link">
    clear_registry_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.clear_registry_subkeys" class="md-nav__link">
    clear_registry_subkeys()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.configure_joypads" class="md-nav__link">
    configure_joypads()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.desktop_integration" class="md-nav__link">
    desktop_integration()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.get_desktop_folders" class="md-nav__link">
    get_desktop_folders()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.get_key_path" class="md-nav__link">
    get_key_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.get_registry_key" class="md-nav__link">
    get_registry_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.get_registry_path" class="md-nav__link">
    get_registry_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.override_dll" class="md-nav__link">
    override_dll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.set_crash_dialogs" class="md-nav__link">
    set_crash_dialogs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.set_desktop_size" class="md-nav__link">
    set_desktop_size()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.set_dpi" class="md-nav__link">
    set_dpi()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.set_registry_key" class="md-nav__link">
    set_registry_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.set_virtual_desktop" class="md-nav__link">
    set_virtual_desktop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.setup_defaults" class="md-nav__link">
    setup_defaults()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.find_prefix" class="md-nav__link">
    find_prefix()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.is_prefix" class="md-nav__link">
    is_prefix()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.registry" class="md-nav__link">
    registry
  </a>
  
    <nav class="md-nav" aria-label="registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.DATA_TYPES" class="md-nav__link">
    DATA_TYPES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_BINARY" class="md-nav__link">
    REG_BINARY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_DWORD" class="md-nav__link">
    REG_DWORD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_DWORD_BIG_ENDIAN" class="md-nav__link">
    REG_DWORD_BIG_ENDIAN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_EXPAND_SZ" class="md-nav__link">
    REG_EXPAND_SZ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_LINK" class="md-nav__link">
    REG_LINK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_MULTI_SZ" class="md-nav__link">
    REG_MULTI_SZ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_NONE" class="md-nav__link">
    REG_NONE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_SZ" class="md-nav__link">
    REG_SZ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime" class="md-nav__link">
    WindowsFileTime
  </a>
  
    <nav class="md-nav" aria-label="WindowsFileTime">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.epoch_delta" class="md-nav__link">
    epoch_delta
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.ticks_per_seconds" class="md-nav__link">
    ticks_per_seconds
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.__repr__" class="md-nav__link">
    __repr__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.from_hex" class="md-nav__link">
    from_hex()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.from_unix_timestamp" class="md-nav__link">
    from_unix_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.to_date_time" class="md-nav__link">
    to_date_time()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.to_hex" class="md-nav__link">
    to_hex()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.to_unix_timestamp" class="md-nav__link">
    to_unix_timestamp()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry" class="md-nav__link">
    WineRegistry
  </a>
  
    <nav class="md-nav" aria-label="WineRegistry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.prefix_path" class="md-nav__link">
    prefix_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.relative_to_header" class="md-nav__link">
    relative_to_header
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.version_header" class="md-nav__link">
    version_header
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.__str__" class="md-nav__link">
    __str__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.clear_key" class="md-nav__link">
    clear_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.clear_subkeys" class="md-nav__link">
    clear_subkeys()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.get_raw_registry" class="md-nav__link">
    get_raw_registry()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.get_unix_path" class="md-nav__link">
    get_unix_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.parse_reg_file" class="md-nav__link">
    parse_reg_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.query" class="md-nav__link">
    query()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.render" class="md-nav__link">
    render()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.save" class="md-nav__link">
    save()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.set_value" class="md-nav__link">
    set_value()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey" class="md-nav__link">
    WineRegistryKey
  </a>
  
    <nav class="md-nav" aria-label="WineRegistryKey">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.__str__" class="md-nav__link">
    __str__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.add_meta" class="md-nav__link">
    add_meta()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.add_to_last" class="md-nav__link">
    add_to_last()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.decode_unicode" class="md-nav__link">
    decode_unicode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.get_meta" class="md-nav__link">
    get_meta()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.get_subkey" class="md-nav__link">
    get_subkey()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.parse" class="md-nav__link">
    parse()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.render" class="md-nav__link">
    render()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.render_value" class="md-nav__link">
    render_value()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.set_subkey" class="md-nav__link">
    set_subkey()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.vkd3d" class="md-nav__link">
    vkd3d
  </a>
  
    <nav class="md-nav" aria-label="vkd3d">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.vkd3d.VKD3DManager" class="md-nav__link">
    VKD3DManager
  </a>
  
    <nav class="md-nav" aria-label="VKD3DManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.vkd3d.VKD3DManager.base_dir" class="md-nav__link">
    base_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.vkd3d.VKD3DManager.component" class="md-nav__link">
    component
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.vkd3d.VKD3DManager.managed_dlls" class="md-nav__link">
    managed_dlls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.vkd3d.VKD3DManager.releases_url" class="md-nav__link">
    releases_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.vkd3d.VKD3DManager.versions_path" class="md-nav__link">
    versions_path
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.wine" class="md-nav__link">
    wine
  </a>
  
    <nav class="md-nav" aria-label="wine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.ESYNC_LIMIT_CHECK" class="md-nav__link">
    ESYNC_LIMIT_CHECK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.FSYNC_SUPPORT_CHECK" class="md-nav__link">
    FSYNC_SUPPORT_CHECK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.POL_PATH" class="md-nav__link">
    POL_PATH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.WINE_DEFAULT_ARCH" class="md-nav__link">
    WINE_DEFAULT_ARCH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.WINE_DIR" class="md-nav__link">
    WINE_DIR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.WINE_PATHS" class="md-nav__link">
    WINE_PATHS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.detect_arch" class="md-nav__link">
    detect_arch()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.detect_prefix_arch" class="md-nav__link">
    detect_prefix_arch()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.display_vulkan_error" class="md-nav__link">
    display_vulkan_error()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.esync_display_limit_warning" class="md-nav__link">
    esync_display_limit_warning()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.esync_display_version_warning" class="md-nav__link">
    esync_display_version_warning()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.fsync_display_support_warning" class="md-nav__link">
    fsync_display_support_warning()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.fsync_display_version_warning" class="md-nav__link">
    fsync_display_version_warning()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_default_version" class="md-nav__link">
    get_default_version()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_lutris_wine_versions" class="md-nav__link">
    get_lutris_wine_versions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_overrides_env" class="md-nav__link">
    get_overrides_env()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_playonlinux" class="md-nav__link">
    get_playonlinux()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_pol_wine_versions" class="md-nav__link">
    get_pol_wine_versions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_proton_paths" class="md-nav__link">
    get_proton_paths()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_proton_versions" class="md-nav__link">
    get_proton_versions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_real_executable" class="md-nav__link">
    get_real_executable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_system_wine_versions" class="md-nav__link">
    get_system_wine_versions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_wine_version" class="md-nav__link">
    get_wine_version()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_wine_version_exe" class="md-nav__link">
    get_wine_version_exe()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_wine_versions" class="md-nav__link">
    get_wine_versions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_esync_limit_set" class="md-nav__link">
    is_esync_limit_set()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_fsync_supported" class="md-nav__link">
    is_fsync_supported()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_gstreamer_build" class="md-nav__link">
    is_gstreamer_build()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_installed_systemwide" class="md-nav__link">
    is_installed_systemwide()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_mingw_build" class="md-nav__link">
    is_mingw_build()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_version_esync" class="md-nav__link">
    is_version_esync()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_version_fsync" class="md-nav__link">
    is_version_fsync()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_version_installed" class="md-nav__link">
    is_version_installed()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.set_drive_path" class="md-nav__link">
    set_drive_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.use_lutris_runtime" class="md-nav__link">
    use_lutris_runtime()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cabinstall/" class="md-nav__link">
        cabinstall
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="d3d_extras/" class="md-nav__link">
        d3d_extras
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dgvoodoo2/" class="md-nav__link">
        dgvoodoo2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dll_manager/" class="md-nav__link">
        dll_manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dxvk/" class="md-nav__link">
        dxvk
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dxvk_nvapi/" class="md-nav__link">
        dxvk_nvapi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fsync/" class="md-nav__link">
        fsync
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="prefix/" class="md-nav__link">
        prefix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="registry/" class="md-nav__link">
        registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="vkd3d/" class="md-nav__link">
        vkd3d
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="wine/" class="md-nav__link">
        wine
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../xdgshortcuts/" class="md-nav__link">
        xdgshortcuts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../yaml/" class="md-nav__link">
        yaml
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Development" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine" class="md-nav__link">
    lutris.util.wine
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall" class="md-nav__link">
    cabinstall
  </a>
  
    <nav class="md-nav" aria-label="cabinstall">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller" class="md-nav__link">
    CabInstaller
  </a>
  
    <nav class="md-nav" aria-label="CabInstaller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.apply_to_registry" class="md-nav__link">
    apply_to_registry()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.check_dll_arch" class="md-nav__link">
    check_dll_arch()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.cleanup" class="md-nav__link">
    cleanup()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.extract_from_cab" class="md-nav__link">
    extract_from_cab()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_arch_from_dll" class="md-nav__link">
    get_arch_from_dll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_arch_from_manifest" class="md-nav__link">
    get_arch_from_manifest()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_dll_destdir" class="md-nav__link">
    get_dll_destdir()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_registry_files" class="md-nav__link">
    get_registry_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_registry_from_manifest" class="md-nav__link">
    get_registry_from_manifest()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_system32_realdir" class="md-nav__link">
    get_system32_realdir()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_winebin" class="md-nav__link">
    get_winebin()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.get_wineprefix_arch" class="md-nav__link">
    get_wineprefix_arch()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.install" class="md-nav__link">
    install()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.install_dll" class="md-nav__link">
    install_dll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.process_key" class="md-nav__link">
    process_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.process_value" class="md-nav__link">
    process_value()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.cabinstall.CabInstaller.replace_variables" class="md-nav__link">
    replace_variables()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.d3d_extras" class="md-nav__link">
    d3d_extras
  </a>
  
    <nav class="md-nav" aria-label="d3d_extras">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.d3d_extras.D3DExtrasManager" class="md-nav__link">
    D3DExtrasManager
  </a>
  
    <nav class="md-nav" aria-label="D3DExtrasManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.base_dir" class="md-nav__link">
    base_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.component" class="md-nav__link">
    component
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.managed_dlls" class="md-nav__link">
    managed_dlls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.releases_url" class="md-nav__link">
    releases_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.versions_path" class="md-nav__link">
    versions_path
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2" class="md-nav__link">
    dgvoodoo2
  </a>
  
    <nav class="md-nav" aria-label="dgvoodoo2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager" class="md-nav__link">
    dgvoodoo2Manager
  </a>
  
    <nav class="md-nav" aria-label="dgvoodoo2Manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.base_dir" class="md-nav__link">
    base_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.component" class="md-nav__link">
    component
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.managed_appdata_files" class="md-nav__link">
    managed_appdata_files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.managed_dlls" class="md-nav__link">
    managed_dlls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.releases_url" class="md-nav__link">
    releases_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.versions_path" class="md-nav__link">
    versions_path
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager" class="md-nav__link">
    dll_manager
  </a>
  
    <nav class="md-nav" aria-label="dll_manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager" class="md-nav__link">
    DLLManager
  </a>
  
    <nav class="md-nav" aria-label="DLLManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.archs" class="md-nav__link">
    archs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.base_dir" class="md-nav__link">
    base_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.component" class="md-nav__link">
    component
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.managed_appdata_files" class="md-nav__link">
    managed_appdata_files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.managed_dlls" class="md-nav__link">
    managed_dlls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.path" class="md-nav__link">
    path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.releases_url" class="md-nav__link">
    releases_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.version" class="md-nav__link">
    version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.version_choices" class="md-nav__link">
    version_choices
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.versions" class="md-nav__link">
    versions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.versions_path" class="md-nav__link">
    versions_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.disable" class="md-nav__link">
    disable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.disable_dll" class="md-nav__link">
    disable_dll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.disable_user_file" class="md-nav__link">
    disable_user_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.dll_exists" class="md-nav__link">
    dll_exists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.download" class="md-nav__link">
    download()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.enable" class="md-nav__link">
    enable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.enable_dll" class="md-nav__link">
    enable_dll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.enable_user_file" class="md-nav__link">
    enable_user_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.fetch_versions" class="md-nav__link">
    fetch_versions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.get_download_url" class="md-nav__link">
    get_download_url()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.is_available" class="md-nav__link">
    is_available()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.is_managed_dll" class="md-nav__link">
    is_managed_dll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.load_versions" class="md-nav__link">
    load_versions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dll_manager.DLLManager.upgrade" class="md-nav__link">
    upgrade()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk" class="md-nav__link">
    dxvk
  </a>
  
    <nav class="md-nav" aria-label="dxvk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk.DXVKManager" class="md-nav__link">
    DXVKManager
  </a>
  
    <nav class="md-nav" aria-label="DXVKManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk.DXVKManager.base_dir" class="md-nav__link">
    base_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk.DXVKManager.component" class="md-nav__link">
    component
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk.DXVKManager.managed_dlls" class="md-nav__link">
    managed_dlls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk.DXVKManager.releases_url" class="md-nav__link">
    releases_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk.DXVKManager.versions_path" class="md-nav__link">
    versions_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk.DXVKManager.is_managed_dll" class="md-nav__link">
    is_managed_dll()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi" class="md-nav__link">
    dxvk_nvapi
  </a>
  
    <nav class="md-nav" aria-label="dxvk_nvapi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager" class="md-nav__link">
    DXVKNVAPIManager
  </a>
  
    <nav class="md-nav" aria-label="DXVKNVAPIManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.base_dir" class="md-nav__link">
    base_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.component" class="md-nav__link">
    component
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.dlss_dlls" class="md-nav__link">
    dlss_dlls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.managed_dlls" class="md-nav__link">
    managed_dlls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.releases_url" class="md-nav__link">
    releases_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.versions_path" class="md-nav__link">
    versions_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.disable" class="md-nav__link">
    disable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.disable_dll" class="md-nav__link">
    disable_dll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.enable" class="md-nav__link">
    enable()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync" class="md-nav__link">
    fsync
  </a>
  
    <nav class="md-nav" aria-label="fsync">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.__all__" class="md-nav__link">
    __all__
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.futex_waitv" class="md-nav__link">
    futex_waitv
  </a>
  
    <nav class="md-nav" aria-label="futex_waitv">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.futex_waitv.__slots__" class="md-nav__link">
    __slots__
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.timespec" class="md-nav__link">
    timespec
  </a>
  
    <nav class="md-nav" aria-label="timespec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.timespec.__slots__" class="md-nav__link">
    __slots__
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.is_fsync_supported" class="md-nav__link">
    is_fsync_supported()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.is_futex2_supported" class="md-nav__link">
    is_futex2_supported()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.is_futex_wait_multiple_supported" class="md-nav__link">
    is_futex_wait_multiple_supported()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.fsync.is_futex_waitv_supported" class="md-nav__link">
    is_futex_waitv_supported()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix" class="md-nav__link">
    prefix
  </a>
  
    <nav class="md-nav" aria-label="prefix">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.DEFAULT_DESKTOP_FOLDERS" class="md-nav__link">
    DEFAULT_DESKTOP_FOLDERS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.DEFAULT_DLL_OVERRIDES" class="md-nav__link">
    DEFAULT_DLL_OVERRIDES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.DESKTOP_KEYS" class="md-nav__link">
    DESKTOP_KEYS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.DESKTOP_XDG" class="md-nav__link">
    DESKTOP_XDG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager" class="md-nav__link">
    WinePrefixManager
  </a>
  
    <nav class="md-nav" aria-label="WinePrefixManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.appdata_dir" class="md-nav__link">
    appdata_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.hkcu_prefix" class="md-nav__link">
    hkcu_prefix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.hklm_prefix" class="md-nav__link">
    hklm_prefix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.user_dir" class="md-nav__link">
    user_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.clear_registry_key" class="md-nav__link">
    clear_registry_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.clear_registry_subkeys" class="md-nav__link">
    clear_registry_subkeys()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.configure_joypads" class="md-nav__link">
    configure_joypads()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.desktop_integration" class="md-nav__link">
    desktop_integration()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.get_desktop_folders" class="md-nav__link">
    get_desktop_folders()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.get_key_path" class="md-nav__link">
    get_key_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.get_registry_key" class="md-nav__link">
    get_registry_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.get_registry_path" class="md-nav__link">
    get_registry_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.override_dll" class="md-nav__link">
    override_dll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.set_crash_dialogs" class="md-nav__link">
    set_crash_dialogs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.set_desktop_size" class="md-nav__link">
    set_desktop_size()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.set_dpi" class="md-nav__link">
    set_dpi()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.set_registry_key" class="md-nav__link">
    set_registry_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.set_virtual_desktop" class="md-nav__link">
    set_virtual_desktop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.WinePrefixManager.setup_defaults" class="md-nav__link">
    setup_defaults()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.find_prefix" class="md-nav__link">
    find_prefix()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.prefix.is_prefix" class="md-nav__link">
    is_prefix()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.registry" class="md-nav__link">
    registry
  </a>
  
    <nav class="md-nav" aria-label="registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.DATA_TYPES" class="md-nav__link">
    DATA_TYPES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_BINARY" class="md-nav__link">
    REG_BINARY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_DWORD" class="md-nav__link">
    REG_DWORD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_DWORD_BIG_ENDIAN" class="md-nav__link">
    REG_DWORD_BIG_ENDIAN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_EXPAND_SZ" class="md-nav__link">
    REG_EXPAND_SZ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_LINK" class="md-nav__link">
    REG_LINK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_MULTI_SZ" class="md-nav__link">
    REG_MULTI_SZ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_NONE" class="md-nav__link">
    REG_NONE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.REG_SZ" class="md-nav__link">
    REG_SZ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime" class="md-nav__link">
    WindowsFileTime
  </a>
  
    <nav class="md-nav" aria-label="WindowsFileTime">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.epoch_delta" class="md-nav__link">
    epoch_delta
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.ticks_per_seconds" class="md-nav__link">
    ticks_per_seconds
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.__repr__" class="md-nav__link">
    __repr__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.from_hex" class="md-nav__link">
    from_hex()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.from_unix_timestamp" class="md-nav__link">
    from_unix_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.to_date_time" class="md-nav__link">
    to_date_time()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.to_hex" class="md-nav__link">
    to_hex()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WindowsFileTime.to_unix_timestamp" class="md-nav__link">
    to_unix_timestamp()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry" class="md-nav__link">
    WineRegistry
  </a>
  
    <nav class="md-nav" aria-label="WineRegistry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.prefix_path" class="md-nav__link">
    prefix_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.relative_to_header" class="md-nav__link">
    relative_to_header
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.version_header" class="md-nav__link">
    version_header
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.__str__" class="md-nav__link">
    __str__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.clear_key" class="md-nav__link">
    clear_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.clear_subkeys" class="md-nav__link">
    clear_subkeys()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.get_raw_registry" class="md-nav__link">
    get_raw_registry()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.get_unix_path" class="md-nav__link">
    get_unix_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.parse_reg_file" class="md-nav__link">
    parse_reg_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.query" class="md-nav__link">
    query()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.render" class="md-nav__link">
    render()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.save" class="md-nav__link">
    save()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistry.set_value" class="md-nav__link">
    set_value()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey" class="md-nav__link">
    WineRegistryKey
  </a>
  
    <nav class="md-nav" aria-label="WineRegistryKey">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.__str__" class="md-nav__link">
    __str__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.add_meta" class="md-nav__link">
    add_meta()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.add_to_last" class="md-nav__link">
    add_to_last()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.decode_unicode" class="md-nav__link">
    decode_unicode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.get_meta" class="md-nav__link">
    get_meta()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.get_subkey" class="md-nav__link">
    get_subkey()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.parse" class="md-nav__link">
    parse()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.render" class="md-nav__link">
    render()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.render_value" class="md-nav__link">
    render_value()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.registry.WineRegistryKey.set_subkey" class="md-nav__link">
    set_subkey()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.vkd3d" class="md-nav__link">
    vkd3d
  </a>
  
    <nav class="md-nav" aria-label="vkd3d">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.vkd3d.VKD3DManager" class="md-nav__link">
    VKD3DManager
  </a>
  
    <nav class="md-nav" aria-label="VKD3DManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.vkd3d.VKD3DManager.base_dir" class="md-nav__link">
    base_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.vkd3d.VKD3DManager.component" class="md-nav__link">
    component
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.vkd3d.VKD3DManager.managed_dlls" class="md-nav__link">
    managed_dlls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.vkd3d.VKD3DManager.releases_url" class="md-nav__link">
    releases_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.vkd3d.VKD3DManager.versions_path" class="md-nav__link">
    versions_path
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lutris.util.wine.wine" class="md-nav__link">
    wine
  </a>
  
    <nav class="md-nav" aria-label="wine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.ESYNC_LIMIT_CHECK" class="md-nav__link">
    ESYNC_LIMIT_CHECK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.FSYNC_SUPPORT_CHECK" class="md-nav__link">
    FSYNC_SUPPORT_CHECK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.POL_PATH" class="md-nav__link">
    POL_PATH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.WINE_DEFAULT_ARCH" class="md-nav__link">
    WINE_DEFAULT_ARCH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.WINE_DIR" class="md-nav__link">
    WINE_DIR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.WINE_PATHS" class="md-nav__link">
    WINE_PATHS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.detect_arch" class="md-nav__link">
    detect_arch()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.detect_prefix_arch" class="md-nav__link">
    detect_prefix_arch()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.display_vulkan_error" class="md-nav__link">
    display_vulkan_error()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.esync_display_limit_warning" class="md-nav__link">
    esync_display_limit_warning()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.esync_display_version_warning" class="md-nav__link">
    esync_display_version_warning()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.fsync_display_support_warning" class="md-nav__link">
    fsync_display_support_warning()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.fsync_display_version_warning" class="md-nav__link">
    fsync_display_version_warning()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_default_version" class="md-nav__link">
    get_default_version()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_lutris_wine_versions" class="md-nav__link">
    get_lutris_wine_versions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_overrides_env" class="md-nav__link">
    get_overrides_env()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_playonlinux" class="md-nav__link">
    get_playonlinux()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_pol_wine_versions" class="md-nav__link">
    get_pol_wine_versions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_proton_paths" class="md-nav__link">
    get_proton_paths()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_proton_versions" class="md-nav__link">
    get_proton_versions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_real_executable" class="md-nav__link">
    get_real_executable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_system_wine_versions" class="md-nav__link">
    get_system_wine_versions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_wine_version" class="md-nav__link">
    get_wine_version()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_wine_version_exe" class="md-nav__link">
    get_wine_version_exe()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.get_wine_versions" class="md-nav__link">
    get_wine_versions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_esync_limit_set" class="md-nav__link">
    is_esync_limit_set()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_fsync_supported" class="md-nav__link">
    is_fsync_supported()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_gstreamer_build" class="md-nav__link">
    is_gstreamer_build()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_installed_systemwide" class="md-nav__link">
    is_installed_systemwide()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_mingw_build" class="md-nav__link">
    is_mingw_build()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_version_esync" class="md-nav__link">
    is_version_esync()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_version_fsync" class="md-nav__link">
    is_version_fsync()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.is_version_installed" class="md-nav__link">
    is_version_installed()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.set_drive_path" class="md-nav__link">
    set_drive_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lutris.util.wine.wine.use_lutris_runtime" class="md-nav__link">
    use_lutris_runtime()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/lutris/lutris/edit/master/docs/lutris/util/wine/__init__.py" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



  <h1>Index</h1>

<div class="doc doc-object doc-module">

<a id="lutris.util.wine"></a>
    <div class="doc doc-contents first">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h2 id="lutris.util.wine.cabinstall" class="doc doc-heading">
        <code>cabinstall</code>



<a href="#lutris.util.wine.cabinstall" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="lutris.util.wine.cabinstall.CabInstaller" class="doc doc-heading">
        <code>
CabInstaller        </code>



<a href="#lutris.util.wine.cabinstall.CabInstaller" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Extract and install contents of cab files</p>
<p>Based on an implementation by tonix64: <a href="https://github.com/tonix64/python-installcab">https://github.com/tonix64/python-installcab</a></p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">CabInstaller</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Extract and install contents of cab files</span>

<span class="sd">    Based on an implementation by tonix64: https://github.com/tonix64/python-installcab</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">arch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wine_path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">winearch</span> <span class="o">=</span> <span class="n">arch</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_wineprefix_arch</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wine_path</span> <span class="o">=</span> <span class="n">wine_path</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">register_dlls</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Whether to register DLLs, I don&#39;t the purpose of that</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">strip_dlls</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># When registering, strip the full path</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">process_key</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;I have no clue why&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">key</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;HKEY_CLASSES_ROOT&quot;</span><span class="p">,</span> <span class="s2">&quot;HKEY_LOCAL_MACHINE</span><span class="se">\\</span><span class="s2">Software</span><span class="se">\\</span><span class="s2">Classes&quot;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_arch_from_manifest</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
        <span class="n">registry_keys</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;{urn:schemas-microsoft-com:asm.v3}assemblyIdentity&quot;</span><span class="p">)</span>
        <span class="n">arch</span> <span class="o">=</span> <span class="n">registry_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s2">&quot;processorArchitecture&quot;</span><span class="p">]</span>
        <span class="n">arch_map</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;amd64&quot;</span><span class="p">:</span> <span class="s2">&quot;win64&quot;</span><span class="p">,</span> <span class="s2">&quot;x86&quot;</span><span class="p">:</span> <span class="s2">&quot;win32&quot;</span><span class="p">,</span> <span class="s2">&quot;wow64&quot;</span><span class="p">:</span> <span class="s2">&quot;wow64&quot;</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">arch_map</span><span class="p">[</span><span class="n">arch</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_winebin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arch</span><span class="p">):</span>
        <span class="n">wine_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wine_path</span> <span class="ow">or</span> <span class="s2">&quot;wine&quot;</span>
        <span class="k">return</span> <span class="n">wine_path</span> <span class="k">if</span> <span class="n">arch</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;win32&quot;</span><span class="p">,</span> <span class="s2">&quot;wow64&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="n">wine_path</span> <span class="o">+</span> <span class="s2">&quot;64&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_arch_from_dll</span><span class="p">(</span><span class="n">dll_path</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;x86-64&quot;</span> <span class="ow">in</span> <span class="n">read_process_output</span><span class="p">([</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">]):</span>
            <span class="k">return</span> <span class="s2">&quot;win64&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;win32&quot;</span>

    <span class="k">def</span> <span class="nf">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Cleaning up </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">check_dll_arch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_arch_from_dll</span><span class="p">(</span><span class="n">dll_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">replace_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">arch</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;$(&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.help)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">help&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.inf)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">inf&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.wbem)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">wbem&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.windows)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.ProgramFiles)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">Program Files&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.programFiles)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">Program Files&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.programFilesX86)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">Program Files (x86)&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.system32)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_system32_realdir</span><span class="p">(</span><span class="n">arch</span><span class="p">))</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s2">&quot;$(runtime.drivers)&quot;</span><span class="p">,</span>
                <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="si">%s</span><span class="se">\\</span><span class="s2">drivers&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_system32_realdir</span><span class="p">(</span><span class="n">arch</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\\\</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">process_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reg_value</span><span class="p">,</span> <span class="n">arch</span><span class="p">):</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="n">reg_value</span><span class="o">.</span><span class="n">attrib</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
        <span class="n">value_type</span> <span class="o">=</span> <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;valueType&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;@&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">name</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">replace_variables</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;REG_BINARY&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;hex:&quot;</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;REG_DWORD&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;dword:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;0x&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;REG_QWORD&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;qword:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;0x&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;REG_NONE&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;REG_EXPAND_SZ&quot;</span><span class="p">:</span>
            <span class="c1"># not sure if we should replace this ones at this point:</span>
            <span class="c1"># caps can vary in the pattern</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%SystemRoot%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%ProgramFiles%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">Program Files&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%WinDir%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%ResourceDir%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%Public%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">users</span><span class="se">\\</span><span class="s2">Public&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%Lo</span><span class="s2">calAppData%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">Public</span><span class="se">\\</span><span class="s2">Local Settings</span><span class="se">\\</span><span class="s2">Application Data&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%AllUsersProfile%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%UserProfile%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%ProgramData%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">ProgramData&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;REG_SZ&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;warning unkown type: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">replace_variables</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strip_dlls</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;.dll&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;c:</span><span class="se">\\\\</span><span class="s2">windows</span><span class="se">\\\\</span><span class="s2">system32</span><span class="se">\\\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;c:</span><span class="se">\\\\</span><span class="s2">windows</span><span class="se">\\\\</span><span class="s2">syswow64</span><span class="se">\\\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">get_registry_from_manifest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
        <span class="n">arch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_arch_from_manifest</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
        <span class="n">registry_keys</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;{urn:schemas-microsoft-com:asm.v3}registryKeys&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">registry_keys</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">registry_key</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">registry_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_key</span><span class="p">(</span><span class="n">registry_key</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s2">&quot;keyName&quot;</span><span class="p">])</span>
                <span class="n">out</span> <span class="o">+=</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">]</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">key</span>
                <span class="k">for</span> <span class="n">reg_value</span> <span class="ow">in</span> <span class="n">registry_key</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;{urn:schemas-microsoft-com:asm.v3}registryValue&quot;</span><span class="p">):</span>
                    <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_value</span><span class="p">(</span><span class="n">reg_value</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">out</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="n">out</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_wineprefix_arch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">,</span> <span class="s2">&quot;system.reg&quot;</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reg_file</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">reg_file</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#arch=win32&quot;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="s2">&quot;win32&quot;</span>
                <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#arch=win64&quot;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="s2">&quot;win64&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;win64&quot;</span>

    <span class="k">def</span> <span class="nf">get_system32_realdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arch</span><span class="p">):</span>
        <span class="n">dest_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="p">(</span><span class="s2">&quot;win64&quot;</span><span class="p">,</span> <span class="s2">&quot;win32&quot;</span><span class="p">):</span> <span class="s2">&quot;Syswow64&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="s2">&quot;win64&quot;</span><span class="p">,</span> <span class="s2">&quot;win64&quot;</span><span class="p">):</span> <span class="s2">&quot;System32&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="s2">&quot;win64&quot;</span><span class="p">,</span> <span class="s2">&quot;wow64&quot;</span><span class="p">):</span> <span class="s2">&quot;System32&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="s2">&quot;win32&quot;</span><span class="p">,</span> <span class="s2">&quot;win32&quot;</span><span class="p">):</span> <span class="s2">&quot;System32&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">dest_map</span><span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">winearch</span><span class="p">,</span> <span class="n">arch</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">get_dll_destdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_arch_from_dll</span><span class="p">(</span><span class="n">dll_path</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">winearch</span> <span class="o">==</span> <span class="s2">&quot;win64&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">,</span> <span class="s2">&quot;drive_c/windows/syswow64&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">,</span> <span class="s2">&quot;drive_c/windows/system32&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">install_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">):</span>
        <span class="n">dest_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dll_destdir</span><span class="p">(</span><span class="n">dll_path</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Copying </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">,</span> <span class="n">dest_dir</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">dll_path</span><span class="p">,</span> <span class="n">dest_dir</span><span class="p">)</span>

        <span class="n">dest_dll_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dest_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">dll_path</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_dlls</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">arch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_arch_from_dll</span><span class="p">(</span><span class="n">dest_dll_path</span><span class="p">)</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">get_winebin</span><span class="p">(</span><span class="n">arch</span><span class="p">),</span> <span class="s2">&quot;regsvr32&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">dest_dll_path</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">get_registry_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_files</span><span class="p">):</span>
        <span class="n">reg_files</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="n">output_files</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.manifest&quot;</span><span class="p">):</span>
                <span class="n">out</span> <span class="o">=</span> <span class="s2">&quot;Windows Registry Editor Version 5.00</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                <span class="n">outdata</span><span class="p">,</span> <span class="n">arch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_registry_from_manifest</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">outdata</span><span class="p">:</span>
                    <span class="n">out</span> <span class="o">+=</span> <span class="n">outdata</span>
                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span><span class="p">,</span> <span class="n">file_path</span> <span class="o">+</span> <span class="s2">&quot;.reg&quot;</span><span class="p">),</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reg_file</span><span class="p">:</span>
                        <span class="n">reg_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
                    <span class="n">reg_files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">file_path</span> <span class="o">+</span> <span class="s2">&quot;.reg&quot;</span><span class="p">,</span> <span class="n">arch</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.dll&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">install_dll</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">reg_files</span>

    <span class="k">def</span> <span class="nf">apply_to_registry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">arch</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Applying </span><span class="si">%s</span><span class="s2"> to registry&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">get_winebin</span><span class="p">(</span><span class="n">arch</span><span class="p">),</span> <span class="s2">&quot;regedit&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">extract_from_cab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cabfile</span><span class="p">,</span> <span class="n">component</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Extracts files matching a `component` name from a `cabfile`</span>

<span class="sd">        Params:</span>
<span class="sd">            cabfile (str): Path to a cabfile to extract from</span>
<span class="sd">            component (str): component to extract from the cab file</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: Files extracted from the cab file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">execute</span><span class="p">([</span><span class="s2">&quot;cabextract&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">,</span> <span class="s2">&quot;*</span><span class="si">%s</span><span class="s2">*&quot;</span> <span class="o">%</span> <span class="n">component</span><span class="p">,</span> <span class="s2">&quot;-d&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span><span class="p">,</span> <span class="n">cabfile</span><span class="p">])</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">install</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cabfile</span><span class="p">,</span> <span class="n">component</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Install `component` from `cabfile`&quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Installing </span><span class="si">%s</span><span class="s2"> from </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">component</span><span class="p">,</span> <span class="n">cabfile</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">arch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_registry_files</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extract_from_cab</span><span class="p">(</span><span class="n">cabfile</span><span class="p">,</span> <span class="n">component</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_to_registry</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">arch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wine_path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#lutris.util.wine.cabinstall.CabInstaller.__init__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">arch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wine_path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">winearch</span> <span class="o">=</span> <span class="n">arch</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_wineprefix_arch</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wine_path</span> <span class="o">=</span> <span class="n">wine_path</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">register_dlls</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Whether to register DLLs, I don&#39;t the purpose of that</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">strip_dlls</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># When registering, strip the full path</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.apply_to_registry" class="doc doc-heading">
<code class="highlight language-python"><span class="n">apply_to_registry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span></code>


<a href="#lutris.util.wine.cabinstall.CabInstaller.apply_to_registry" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">apply_to_registry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">arch</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Applying </span><span class="si">%s</span><span class="s2"> to registry&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">get_winebin</span><span class="p">(</span><span class="n">arch</span><span class="p">),</span> <span class="s2">&quot;regedit&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.check_dll_arch" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_dll_arch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.cabinstall.CabInstaller.check_dll_arch" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_dll_arch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_arch_from_dll</span><span class="p">(</span><span class="n">dll_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.cleanup" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.cabinstall.CabInstaller.cleanup" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Cleaning up </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span><span class="p">)</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.extract_from_cab" class="doc doc-heading">
<code class="highlight language-python"><span class="n">extract_from_cab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cabfile</span><span class="p">,</span> <span class="n">component</span><span class="p">)</span></code>


<a href="#lutris.util.wine.cabinstall.CabInstaller.extract_from_cab" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Extracts files matching a <code>component</code> name from a <code>cabfile</code></p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cabfile</code></td>
        <td><code>str</code></td>
        <td><p>Path to a cabfile to extract from</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>component</code></td>
        <td><code>str</code></td>
        <td><p>component to extract from the cab file</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>Files extracted from the cab file</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">extract_from_cab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cabfile</span><span class="p">,</span> <span class="n">component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extracts files matching a `component` name from a `cabfile`</span>

<span class="sd">    Params:</span>
<span class="sd">        cabfile (str): Path to a cabfile to extract from</span>
<span class="sd">        component (str): component to extract from the cab file</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: Files extracted from the cab file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">execute</span><span class="p">([</span><span class="s2">&quot;cabextract&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">,</span> <span class="s2">&quot;*</span><span class="si">%s</span><span class="s2">*&quot;</span> <span class="o">%</span> <span class="n">component</span><span class="p">,</span> <span class="s2">&quot;-d&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span><span class="p">,</span> <span class="n">cabfile</span><span class="p">])</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.get_arch_from_dll" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_arch_from_dll</span><span class="p">(</span><span class="n">dll_path</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#lutris.util.wine.cabinstall.CabInstaller.get_arch_from_dll" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_arch_from_dll</span><span class="p">(</span><span class="n">dll_path</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;x86-64&quot;</span> <span class="ow">in</span> <span class="n">read_process_output</span><span class="p">([</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">]):</span>
        <span class="k">return</span> <span class="s2">&quot;win64&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;win32&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.get_arch_from_manifest" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_arch_from_manifest</span><span class="p">(</span><span class="n">root</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#lutris.util.wine.cabinstall.CabInstaller.get_arch_from_manifest" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_arch_from_manifest</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
    <span class="n">registry_keys</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;{urn:schemas-microsoft-com:asm.v3}assemblyIdentity&quot;</span><span class="p">)</span>
    <span class="n">arch</span> <span class="o">=</span> <span class="n">registry_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s2">&quot;processorArchitecture&quot;</span><span class="p">]</span>
    <span class="n">arch_map</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;amd64&quot;</span><span class="p">:</span> <span class="s2">&quot;win64&quot;</span><span class="p">,</span> <span class="s2">&quot;x86&quot;</span><span class="p">:</span> <span class="s2">&quot;win32&quot;</span><span class="p">,</span> <span class="s2">&quot;wow64&quot;</span><span class="p">:</span> <span class="s2">&quot;wow64&quot;</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">arch_map</span><span class="p">[</span><span class="n">arch</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.get_dll_destdir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_dll_destdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.cabinstall.CabInstaller.get_dll_destdir" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_dll_destdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_arch_from_dll</span><span class="p">(</span><span class="n">dll_path</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">winearch</span> <span class="o">==</span> <span class="s2">&quot;win64&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">,</span> <span class="s2">&quot;drive_c/windows/syswow64&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">,</span> <span class="s2">&quot;drive_c/windows/system32&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.get_registry_files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_registry_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_files</span><span class="p">)</span></code>


<a href="#lutris.util.wine.cabinstall.CabInstaller.get_registry_files" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_registry_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_files</span><span class="p">):</span>
    <span class="n">reg_files</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="n">output_files</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.manifest&quot;</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="s2">&quot;Windows Registry Editor Version 5.00</span><span class="se">\n\n</span><span class="s2">&quot;</span>
            <span class="n">outdata</span><span class="p">,</span> <span class="n">arch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_registry_from_manifest</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">outdata</span><span class="p">:</span>
                <span class="n">out</span> <span class="o">+=</span> <span class="n">outdata</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span><span class="p">,</span> <span class="n">file_path</span> <span class="o">+</span> <span class="s2">&quot;.reg&quot;</span><span class="p">),</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reg_file</span><span class="p">:</span>
                    <span class="n">reg_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
                <span class="n">reg_files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">file_path</span> <span class="o">+</span> <span class="s2">&quot;.reg&quot;</span><span class="p">,</span> <span class="n">arch</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.dll&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">install_dll</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">reg_files</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.get_registry_from_manifest" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_registry_from_manifest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span></code>


<a href="#lutris.util.wine.cabinstall.CabInstaller.get_registry_from_manifest" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_registry_from_manifest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">):</span>
    <span class="n">out</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
    <span class="n">arch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_arch_from_manifest</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="n">registry_keys</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;{urn:schemas-microsoft-com:asm.v3}registryKeys&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">registry_keys</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">registry_key</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">registry_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_key</span><span class="p">(</span><span class="n">registry_key</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s2">&quot;keyName&quot;</span><span class="p">])</span>
            <span class="n">out</span> <span class="o">+=</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">]</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">key</span>
            <span class="k">for</span> <span class="n">reg_value</span> <span class="ow">in</span> <span class="n">registry_key</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;{urn:schemas-microsoft-com:asm.v3}registryValue&quot;</span><span class="p">):</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_value</span><span class="p">(</span><span class="n">reg_value</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">out</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="n">out</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.get_system32_realdir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_system32_realdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span></code>


<a href="#lutris.util.wine.cabinstall.CabInstaller.get_system32_realdir" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_system32_realdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arch</span><span class="p">):</span>
    <span class="n">dest_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="p">(</span><span class="s2">&quot;win64&quot;</span><span class="p">,</span> <span class="s2">&quot;win32&quot;</span><span class="p">):</span> <span class="s2">&quot;Syswow64&quot;</span><span class="p">,</span>
        <span class="p">(</span><span class="s2">&quot;win64&quot;</span><span class="p">,</span> <span class="s2">&quot;win64&quot;</span><span class="p">):</span> <span class="s2">&quot;System32&quot;</span><span class="p">,</span>
        <span class="p">(</span><span class="s2">&quot;win64&quot;</span><span class="p">,</span> <span class="s2">&quot;wow64&quot;</span><span class="p">):</span> <span class="s2">&quot;System32&quot;</span><span class="p">,</span>
        <span class="p">(</span><span class="s2">&quot;win32&quot;</span><span class="p">,</span> <span class="s2">&quot;win32&quot;</span><span class="p">):</span> <span class="s2">&quot;System32&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">dest_map</span><span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">winearch</span><span class="p">,</span> <span class="n">arch</span><span class="p">)]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.get_winebin" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_winebin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span></code>


<a href="#lutris.util.wine.cabinstall.CabInstaller.get_winebin" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_winebin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arch</span><span class="p">):</span>
    <span class="n">wine_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wine_path</span> <span class="ow">or</span> <span class="s2">&quot;wine&quot;</span>
    <span class="k">return</span> <span class="n">wine_path</span> <span class="k">if</span> <span class="n">arch</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;win32&quot;</span><span class="p">,</span> <span class="s2">&quot;wow64&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="n">wine_path</span> <span class="o">+</span> <span class="s2">&quot;64&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.get_wineprefix_arch" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_wineprefix_arch</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.cabinstall.CabInstaller.get_wineprefix_arch" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_wineprefix_arch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">,</span> <span class="s2">&quot;system.reg&quot;</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reg_file</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">reg_file</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#arch=win32&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="s2">&quot;win32&quot;</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#arch=win64&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="s2">&quot;win64&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;win64&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.install" class="doc doc-heading">
<code class="highlight language-python"><span class="n">install</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cabfile</span><span class="p">,</span> <span class="n">component</span><span class="p">)</span></code>


<a href="#lutris.util.wine.cabinstall.CabInstaller.install" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Install <code>component</code> from <code>cabfile</code></p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">install</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cabfile</span><span class="p">,</span> <span class="n">component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Install `component` from `cabfile`&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Installing </span><span class="si">%s</span><span class="s2"> from </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">component</span><span class="p">,</span> <span class="n">cabfile</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">arch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_registry_files</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extract_from_cab</span><span class="p">(</span><span class="n">cabfile</span><span class="p">,</span> <span class="n">component</span><span class="p">)):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apply_to_registry</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.install_dll" class="doc doc-heading">
<code class="highlight language-python"><span class="n">install_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.cabinstall.CabInstaller.install_dll" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">install_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">):</span>
    <span class="n">dest_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dll_destdir</span><span class="p">(</span><span class="n">dll_path</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Copying </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">,</span> <span class="n">dest_dir</span><span class="p">)</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">dll_path</span><span class="p">,</span> <span class="n">dest_dir</span><span class="p">)</span>

    <span class="n">dest_dll_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dest_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">dll_path</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_dlls</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">arch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_arch_from_dll</span><span class="p">(</span><span class="n">dest_dll_path</span><span class="p">)</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">get_winebin</span><span class="p">(</span><span class="n">arch</span><span class="p">),</span> <span class="s2">&quot;regsvr32&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">dest_dll_path</span><span class="p">)])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.process_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">process_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#lutris.util.wine.cabinstall.CabInstaller.process_key" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>I have no clue why</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">process_key</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;I have no clue why&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">key</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;HKEY_CLASSES_ROOT&quot;</span><span class="p">,</span> <span class="s2">&quot;HKEY_LOCAL_MACHINE</span><span class="se">\\</span><span class="s2">Software</span><span class="se">\\</span><span class="s2">Classes&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.process_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">process_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reg_value</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span></code>


<a href="#lutris.util.wine.cabinstall.CabInstaller.process_value" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">process_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reg_value</span><span class="p">,</span> <span class="n">arch</span><span class="p">):</span>
    <span class="n">attrs</span> <span class="o">=</span> <span class="n">reg_value</span><span class="o">.</span><span class="n">attrib</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
    <span class="n">value_type</span> <span class="o">=</span> <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;valueType&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;@&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">name</span>
    <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">replace_variables</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;REG_BINARY&quot;</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;hex:&quot;</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;REG_DWORD&quot;</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;dword:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;0x&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;REG_QWORD&quot;</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;qword:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;0x&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;REG_NONE&quot;</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;REG_EXPAND_SZ&quot;</span><span class="p">:</span>
        <span class="c1"># not sure if we should replace this ones at this point:</span>
        <span class="c1"># caps can vary in the pattern</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%SystemRoot%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%ProgramFiles%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">Program Files&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%WinDir%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%ResourceDir%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%Public%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">users</span><span class="se">\\</span><span class="s2">Public&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%Lo</span><span class="s2">calAppData%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">Public</span><span class="se">\\</span><span class="s2">Local Settings</span><span class="se">\\</span><span class="s2">Application Data&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%AllUsersProfile%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%UserProfile%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%ProgramData%&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">ProgramData&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">value</span>
    <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;REG_SZ&quot;</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">value</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;warning unkown type: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">value</span>
    <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">replace_variables</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strip_dlls</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;.dll&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;c:</span><span class="se">\\\\</span><span class="s2">windows</span><span class="se">\\\\</span><span class="s2">system32</span><span class="se">\\\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;c:</span><span class="se">\\\\</span><span class="s2">windows</span><span class="se">\\\\</span><span class="s2">syswow64</span><span class="se">\\\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.cabinstall.CabInstaller.replace_variables" class="doc doc-heading">
<code class="highlight language-python"><span class="n">replace_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">arch</span><span class="p">)</span></code>


<a href="#lutris.util.wine.cabinstall.CabInstaller.replace_variables" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/cabinstall.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">replace_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">arch</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;$(&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.help)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">help&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.inf)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">inf&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.wbem)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">wbem&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.windows)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.ProgramFiles)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">Program Files&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.programFiles)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">Program Files&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.programFilesX86)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">Program Files (x86)&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$(runtime.system32)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_system32_realdir</span><span class="p">(</span><span class="n">arch</span><span class="p">))</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
            <span class="s2">&quot;$(runtime.drivers)&quot;</span><span class="p">,</span>
            <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">windows</span><span class="se">\\</span><span class="si">%s</span><span class="se">\\</span><span class="s2">drivers&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_system32_realdir</span><span class="p">(</span><span class="n">arch</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\\\</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="lutris.util.wine.d3d_extras" class="doc doc-heading">
        <code>d3d_extras</code>



<a href="#lutris.util.wine.d3d_extras" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="lutris.util.wine.d3d_extras.D3DExtrasManager" class="doc doc-heading">
        <code>
D3DExtrasManager            (<a class="autorefs autorefs-internal" title="lutris.util.wine.dll_manager.DLLManager" href="dll_manager/#lutris.util.wine.dll_manager.DLLManager">DLLManager</a>)
        </code>



<a href="#lutris.util.wine.d3d_extras.D3DExtrasManager" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/d3d_extras.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">D3DExtrasManager</span><span class="p">(</span><span class="n">DLLManager</span><span class="p">):</span>
    <span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;D3D Extras&quot;</span>
    <span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">RUNTIME_DIR</span><span class="p">,</span> <span class="s2">&quot;d3d_extras&quot;</span><span class="p">)</span>
    <span class="n">versions_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s2">&quot;d3d_extras_versions.json&quot;</span><span class="p">)</span>
    <span class="n">managed_dlls</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;d3dx10_33&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx10_34&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx10_35&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx10_36&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx10_37&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx10_38&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;d3dx10_39&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx10_40&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx10_41&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx10_42&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx10_43&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx10&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;d3dx11_42&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx11_43&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_24&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_25&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_26&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_27&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;d3dx9_28&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_29&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_30&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_31&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_32&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_33&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;d3dx9_34&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_35&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_36&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_37&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_38&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_39&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;d3dx9_40&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_41&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_42&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dx9_43&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dcompiler_33&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;d3dcompiler_34&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dcompiler_35&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dcompiler_36&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dcompiler_37&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;d3dcompiler_38&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dcompiler_39&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dcompiler_40&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dcompiler_41&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;d3dcompiler_42&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dcompiler_43&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dcompiler_46&quot;</span><span class="p">,</span> <span class="s2">&quot;d3dcompiler_47&quot;</span><span class="p">,)</span>
    <span class="n">releases_url</span> <span class="o">=</span> <span class="s2">&quot;https://api.github.com/repos/lutris/d3d_extras/releases&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.d3d_extras.D3DExtrasManager.base_dir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">base_dir</span></code>


<a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.base_dir" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.d3d_extras.D3DExtrasManager.component" class="doc doc-heading">
<code class="highlight language-python"><span class="n">component</span></code>


<a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.component" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.d3d_extras.D3DExtrasManager.managed_dlls" class="doc doc-heading">
<code class="highlight language-python"><span class="n">managed_dlls</span></code>


<a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.managed_dlls" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.d3d_extras.D3DExtrasManager.releases_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">releases_url</span></code>


<a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.releases_url" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.d3d_extras.D3DExtrasManager.versions_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">versions_path</span></code>


<a href="#lutris.util.wine.d3d_extras.D3DExtrasManager.versions_path" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>








  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="lutris.util.wine.dgvoodoo2" class="doc doc-heading">
        <code>dgvoodoo2</code>



<a href="#lutris.util.wine.dgvoodoo2" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="lutris.util.wine.dgvoodoo2.dgvoodoo2Manager" class="doc doc-heading">
        <code>
dgvoodoo2Manager            (<a class="autorefs autorefs-internal" title="lutris.util.wine.dll_manager.DLLManager" href="dll_manager/#lutris.util.wine.dll_manager.DLLManager">DLLManager</a>)
        </code>



<a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dgvoodoo2.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">dgvoodoo2Manager</span><span class="p">(</span><span class="n">DLLManager</span><span class="p">):</span>
    <span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;dgvoodoo2&quot;</span>
    <span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">RUNTIME_DIR</span><span class="p">,</span> <span class="s2">&quot;dgvoodoo2&quot;</span><span class="p">)</span>
    <span class="n">versions_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s2">&quot;dgvoodoo2_versions.json&quot;</span><span class="p">)</span>
    <span class="n">managed_dlls</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;d3dimm&quot;</span><span class="p">,</span> <span class="s2">&quot;ddraw&quot;</span><span class="p">,</span> <span class="s2">&quot;glide&quot;</span><span class="p">,</span> <span class="s2">&quot;glide2x&quot;</span><span class="p">,</span> <span class="s2">&quot;glide3x&quot;</span><span class="p">,</span> <span class="p">)</span>
    <span class="n">managed_appdata_files</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;dgVoodoo/dgVoodoo.conf&quot;</span><span class="p">]</span>
    <span class="n">releases_url</span> <span class="o">=</span> <span class="s2">&quot;https://api.github.com/repos/lutris/dgvoodoo2/releases&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.base_dir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">base_dir</span></code>


<a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.base_dir" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.component" class="doc doc-heading">
<code class="highlight language-python"><span class="n">component</span></code>


<a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.component" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.managed_appdata_files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">managed_appdata_files</span></code>


<a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.managed_appdata_files" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.managed_dlls" class="doc doc-heading">
<code class="highlight language-python"><span class="n">managed_dlls</span></code>


<a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.managed_dlls" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.releases_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">releases_url</span></code>


<a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.releases_url" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.versions_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">versions_path</span></code>


<a href="#lutris.util.wine.dgvoodoo2.dgvoodoo2Manager.versions_path" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>








  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="lutris.util.wine.dll_manager" class="doc doc-heading">
        <code>dll_manager</code>



<a href="#lutris.util.wine.dll_manager" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Injects sets of DLLs into a prefix</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="lutris.util.wine.dll_manager.DLLManager" class="doc doc-heading">
        <code>
DLLManager        </code>



<a href="#lutris.util.wine.dll_manager.DLLManager" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Utility class to install dlls to a Wine prefix</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DLLManager</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Utility class to install dlls to a Wine prefix&quot;&quot;&quot;</span>
    <span class="n">component</span> <span class="o">=</span> <span class="bp">NotImplemented</span>
    <span class="n">base_dir</span> <span class="o">=</span> <span class="bp">NotImplemented</span>
    <span class="n">managed_dlls</span> <span class="o">=</span> <span class="bp">NotImplemented</span>
    <span class="n">managed_appdata_files</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># most managers have none</span>
    <span class="n">versions_path</span> <span class="o">=</span> <span class="bp">NotImplemented</span>
    <span class="n">releases_url</span> <span class="o">=</span> <span class="bp">NotImplemented</span>
    <span class="n">archs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">32</span><span class="p">:</span> <span class="s2">&quot;x32&quot;</span><span class="p">,</span>
        <span class="mi">64</span><span class="p">:</span> <span class="s2">&quot;x64&quot;</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">arch</span><span class="o">=</span><span class="s2">&quot;win64&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_dir</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_versions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_version</span> <span class="o">=</span> <span class="n">version</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wine_arch</span> <span class="o">=</span> <span class="n">arch</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">versions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return available versions&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_versions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_versions</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_versions</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_versions</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_dir</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_versions</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return version (latest known version if not provided)&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_version</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_version</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">versions</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">versions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Path to local folder containing DLLs&quot;&quot;&quot;</span>
        <span class="n">version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">version</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;No path can be generated for </span><span class="si">%s</span><span class="s2"> because no version information is available.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">version_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">_choices</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Manual&quot;</span><span class="p">),</span> <span class="s2">&quot;manual&quot;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">version</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">versions</span><span class="p">:</span>
            <span class="n">_choices</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">version</span><span class="p">,</span> <span class="n">version</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">_choices</span>

    <span class="k">def</span> <span class="nf">load_versions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">versions_path</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">versions_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">version_file</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">versions</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="s2">&quot;tag_name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">version_file</span><span class="p">)]</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Invalid versions file </span><span class="si">%s</span><span class="s2">, deleting so it is downloaded on next start.&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">versions_path</span>
                <span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">versions_path</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">versions</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">is_managed_dll</span><span class="p">(</span><span class="n">dll_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if a given DLL path is provided by the component&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">is_available</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return whether component is cached locally&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="ow">and</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">dll_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if the dll is provided by the component</span>
<span class="sd">        The DLL might not be available for all architectures so</span>
<span class="sd">        only check if one exists for the supported ones</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span>
            <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll_name</span> <span class="o">+</span> <span class="s2">&quot;.dll&quot;</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">arch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">archs</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_download_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fetch the download URL from the JSON version file&quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">versions_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">version_file</span><span class="p">:</span>
            <span class="n">releases</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">version_file</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">release</span> <span class="ow">in</span> <span class="n">releases</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">release</span><span class="p">[</span><span class="s2">&quot;tag_name&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">return</span> <span class="n">release</span><span class="p">[</span><span class="s2">&quot;assets&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;browser_download_url&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Download component to the local cache; returns True if successful but False</span>
<span class="sd">        if the component could not be downloaded.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_available</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> already available at </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_download_url</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Could not find a release for </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">archive_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Downloading </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">archive_path</span><span class="p">)</span>
        <span class="n">download_file</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">archive_path</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">archive_path</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">archive_path</span><span class="p">)</span><span class="o">.</span><span class="n">st_size</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to download </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Extracting </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">archive_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="n">extract_archive</span><span class="p">(</span><span class="n">archive_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">merge_single</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">archive_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">enable_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_dir</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Copies dlls to the appropriate destination&quot;&quot;&quot;</span>
        <span class="n">dll</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">dll_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">dll_path</span><span class="p">):</span>
            <span class="n">wine_dll_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="n">dll</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_managed_dll</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">):</span>
                    <span class="c1"># Backing up original version (may not be needed)</span>
                    <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">,</span> <span class="n">wine_dll_path</span> <span class="o">+</span> <span class="s2">&quot;.orig&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">symlink</span><span class="p">(</span><span class="n">dll_path</span><span class="p">,</span> <span class="n">wine_dll_path</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed linking </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">,</span> <span class="n">wine_dll_path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">disable_dll</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">disable_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_dir</span><span class="p">,</span> <span class="n">_arch</span><span class="p">,</span> <span class="n">dll</span><span class="p">):</span>  <span class="c1"># pylint: disable=unused-argument</span>
        <span class="sd">&quot;&quot;&quot;Remove DLL from Wine prefix&quot;&quot;&quot;</span>
        <span class="n">wine_dll_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.dll&quot;</span> <span class="o">%</span> <span class="n">dll</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_dll_path</span> <span class="o">+</span> <span class="s2">&quot;.orig&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">)</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">wine_dll_path</span> <span class="o">+</span> <span class="s2">&quot;.orig&quot;</span><span class="p">,</span> <span class="n">wine_dll_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">enable_user_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">source_path</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">source_path</span><span class="p">):</span>
            <span class="n">wine_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
            <span class="n">wine_file_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">):</span>
                    <span class="c1"># Backing up original version (may not be needed)</span>
                    <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">,</span> <span class="n">wine_file_path</span> <span class="o">+</span> <span class="s2">&quot;.orig&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">wine_file_dir</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">wine_file_dir</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">symlink</span><span class="p">(</span><span class="n">source_path</span><span class="p">,</span> <span class="n">wine_file_path</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed linking </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">source_path</span><span class="p">,</span> <span class="n">wine_file_path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">disable_user_file</span><span class="p">(</span><span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">disable_user_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
        <span class="n">wine_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
        <span class="c1"># We only create a symlink; if it is a real file, it mus tbe user data.</span>
        <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_file_path</span> <span class="o">+</span> <span class="s2">&quot;.orig&quot;</span><span class="p">):</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">wine_file_path</span> <span class="o">+</span> <span class="s2">&quot;.orig&quot;</span><span class="p">,</span> <span class="n">wine_file_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_iter_dlls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">windows_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">,</span> <span class="s2">&quot;drive_c/windows&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wine_arch</span> <span class="o">==</span> <span class="s2">&quot;win64&quot;</span><span class="p">:</span>
            <span class="n">system_dirs</span> <span class="o">=</span> <span class="p">{</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">archs</span><span class="p">[</span><span class="mi">64</span><span class="p">]:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">windows_path</span><span class="p">,</span> <span class="s2">&quot;system32&quot;</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">archs</span><span class="p">[</span><span class="mi">32</span><span class="p">]:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">windows_path</span><span class="p">,</span> <span class="s2">&quot;syswow64&quot;</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">wine_arch</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span><span class="p">:</span>
            <span class="n">system_dirs</span> <span class="o">=</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">archs</span><span class="p">[</span><span class="mi">32</span><span class="p">]:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">windows_path</span><span class="p">,</span> <span class="s2">&quot;system32&quot;</span><span class="p">)}</span>

        <span class="k">for</span> <span class="n">arch</span><span class="p">,</span> <span class="n">system_dir</span> <span class="ow">in</span> <span class="n">system_dirs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">dll</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">managed_dlls</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">system_dir</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll</span>

    <span class="k">def</span> <span class="nf">_iter_appdata_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">managed_appdata_files</span><span class="p">:</span>
            <span class="n">prefix_manager</span> <span class="o">=</span> <span class="n">WinePrefixManager</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">)</span>
            <span class="n">appdata_dir</span> <span class="o">=</span> <span class="n">prefix_manager</span><span class="o">.</span><span class="n">appdata_dir</span>
            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">managed_appdata_files</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">filename</span>

    <span class="k">def</span> <span class="nf">enable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enable Dlls for the current prefix&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_available</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">download</span><span class="p">():</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> could not be enabled because it is not available locally&quot;</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="k">for</span> <span class="n">system_dir</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_dlls</span><span class="p">():</span>
            <span class="n">dll_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.dll&quot;</span> <span class="o">%</span> <span class="n">dll</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">enable_dll</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">filename</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_appdata_files</span><span class="p">():</span>
            <span class="n">source_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">enable_user_file</span><span class="p">(</span><span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">source_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">disable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disable DLLs for the current prefix&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">system_dir</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_dlls</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">disable_dll</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">_filename</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_appdata_files</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">disable_user_file</span><span class="p">(</span><span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fetch_versions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get releases from GitHub&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_dir</span><span class="p">)</span>
        <span class="n">download_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">releases_url</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">versions_path</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">upgrade</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fetch_versions</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_available</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Downloading </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">...&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">download</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unable to download </span><span class="si">%s</span><span class="s2"> because version information was not available.&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dll_manager.DLLManager.archs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">archs</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.archs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dll_manager.DLLManager.base_dir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">base_dir</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.base_dir" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dll_manager.DLLManager.component" class="doc doc-heading">
<code class="highlight language-python"><span class="n">component</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.component" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dll_manager.DLLManager.managed_appdata_files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">managed_appdata_files</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.managed_appdata_files" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dll_manager.DLLManager.managed_dlls" class="doc doc-heading">
<code class="highlight language-python"><span class="n">managed_dlls</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.managed_dlls" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dll_manager.DLLManager.path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">path</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#lutris.util.wine.dll_manager.DLLManager.path" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Path to local folder containing DLLs</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dll_manager.DLLManager.releases_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">releases_url</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.releases_url" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dll_manager.DLLManager.version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">version</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#lutris.util.wine.dll_manager.DLLManager.version" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return version (latest known version if not provided)</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dll_manager.DLLManager.version_choices" class="doc doc-heading">
<code class="highlight language-python"><span class="n">version_choices</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#lutris.util.wine.dll_manager.DLLManager.version_choices" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dll_manager.DLLManager.versions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">versions</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#lutris.util.wine.dll_manager.DLLManager.versions" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return available versions</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dll_manager.DLLManager.versions_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">versions_path</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.versions_path" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>






  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">arch</span><span class="o">=</span><span class="s1">&#39;win64&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#lutris.util.wine.dll_manager.DLLManager.__init__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">arch</span><span class="o">=</span><span class="s2">&quot;win64&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_dir</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_versions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_version</span> <span class="o">=</span> <span class="n">version</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wine_arch</span> <span class="o">=</span> <span class="n">arch</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.disable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">disable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.disable" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Disable DLLs for the current prefix</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">disable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Disable DLLs for the current prefix&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">system_dir</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_dlls</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disable_dll</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">_filename</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_appdata_files</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disable_user_file</span><span class="p">(</span><span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.disable_dll" class="doc doc-heading">
<code class="highlight language-python"><span class="n">disable_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_dir</span><span class="p">,</span> <span class="n">_arch</span><span class="p">,</span> <span class="n">dll</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.disable_dll" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Remove DLL from Wine prefix</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">disable_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_dir</span><span class="p">,</span> <span class="n">_arch</span><span class="p">,</span> <span class="n">dll</span><span class="p">):</span>  <span class="c1"># pylint: disable=unused-argument</span>
    <span class="sd">&quot;&quot;&quot;Remove DLL from Wine prefix&quot;&quot;&quot;</span>
    <span class="n">wine_dll_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.dll&quot;</span> <span class="o">%</span> <span class="n">dll</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_dll_path</span> <span class="o">+</span> <span class="s2">&quot;.orig&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">wine_dll_path</span> <span class="o">+</span> <span class="s2">&quot;.orig&quot;</span><span class="p">,</span> <span class="n">wine_dll_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.disable_user_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">disable_user_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.disable_user_file" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">disable_user_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
    <span class="n">wine_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
    <span class="c1"># We only create a symlink; if it is a real file, it mus tbe user data.</span>
    <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_file_path</span> <span class="o">+</span> <span class="s2">&quot;.orig&quot;</span><span class="p">):</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">wine_file_path</span> <span class="o">+</span> <span class="s2">&quot;.orig&quot;</span><span class="p">,</span> <span class="n">wine_file_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.dll_exists" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dll_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll_name</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.dll_exists" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Check if the dll is provided by the component
The DLL might not be available for all architectures so
only check if one exists for the supported ones</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">dll_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if the dll is provided by the component</span>
<span class="sd">    The DLL might not be available for all architectures so</span>
<span class="sd">    only check if one exists for the supported ones</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">any</span><span class="p">(</span>
        <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll_name</span> <span class="o">+</span> <span class="s2">&quot;.dll&quot;</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">arch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">archs</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.download" class="doc doc-heading">
<code class="highlight language-python"><span class="n">download</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.download" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Download component to the local cache; returns True if successful but False
if the component could not be downloaded.</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Download component to the local cache; returns True if successful but False</span>
<span class="sd">    if the component could not be downloaded.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_available</span><span class="p">():</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> already available at </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

    <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_download_url</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Could not find a release for </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">archive_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Downloading </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">archive_path</span><span class="p">)</span>
    <span class="n">download_file</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">archive_path</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">archive_path</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">archive_path</span><span class="p">)</span><span class="o">.</span><span class="n">st_size</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to download </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Extracting </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">archive_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
    <span class="n">extract_archive</span><span class="p">(</span><span class="n">archive_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">merge_single</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">archive_path</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.enable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">enable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.enable" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Enable Dlls for the current prefix</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">enable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Enable Dlls for the current prefix&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_available</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">download</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> could not be enabled because it is not available locally&quot;</span><span class="p">,</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">for</span> <span class="n">system_dir</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_dlls</span><span class="p">():</span>
        <span class="n">dll_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.dll&quot;</span> <span class="o">%</span> <span class="n">dll</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_dll</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">filename</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_appdata_files</span><span class="p">():</span>
        <span class="n">source_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_user_file</span><span class="p">(</span><span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">source_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.enable_dll" class="doc doc-heading">
<code class="highlight language-python"><span class="n">enable_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_dir</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.enable_dll" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Copies dlls to the appropriate destination</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">enable_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_dir</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Copies dlls to the appropriate destination&quot;&quot;&quot;</span>
    <span class="n">dll</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">dll_path</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">dll_path</span><span class="p">):</span>
        <span class="n">wine_dll_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="n">dll</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_managed_dll</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">):</span>
                <span class="c1"># Backing up original version (may not be needed)</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">,</span> <span class="n">wine_dll_path</span> <span class="o">+</span> <span class="s2">&quot;.orig&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">symlink</span><span class="p">(</span><span class="n">dll_path</span><span class="p">,</span> <span class="n">wine_dll_path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed linking </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">,</span> <span class="n">wine_dll_path</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disable_dll</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">dll</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.enable_user_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">enable_user_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">source_path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.enable_user_file" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">enable_user_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">source_path</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">source_path</span><span class="p">):</span>
        <span class="n">wine_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
        <span class="n">wine_file_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">):</span>
                <span class="c1"># Backing up original version (may not be needed)</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">,</span> <span class="n">wine_file_path</span> <span class="o">+</span> <span class="s2">&quot;.orig&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">wine_file_path</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">wine_file_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">wine_file_dir</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">symlink</span><span class="p">(</span><span class="n">source_path</span><span class="p">,</span> <span class="n">wine_file_path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed linking </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">source_path</span><span class="p">,</span> <span class="n">wine_file_path</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disable_user_file</span><span class="p">(</span><span class="n">appdata_dir</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.fetch_versions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fetch_versions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.fetch_versions" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Get releases from GitHub</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">fetch_versions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get releases from GitHub&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_dir</span><span class="p">)</span>
    <span class="n">download_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">releases_url</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">versions_path</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.get_download_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_download_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.get_download_url" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Fetch the download URL from the JSON version file</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_download_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Fetch the download URL from the JSON version file&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">versions_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">version_file</span><span class="p">:</span>
        <span class="n">releases</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">version_file</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">release</span> <span class="ow">in</span> <span class="n">releases</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">release</span><span class="p">[</span><span class="s2">&quot;tag_name&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">return</span> <span class="n">release</span><span class="p">[</span><span class="s2">&quot;assets&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;browser_download_url&quot;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.is_available" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_available</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.is_available" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return whether component is cached locally</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_available</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return whether component is cached locally&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="ow">and</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.is_managed_dll" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_managed_dll</span><span class="p">(</span><span class="n">dll_path</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#lutris.util.wine.dll_manager.DLLManager.is_managed_dll" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Check if a given DLL path is provided by the component</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">is_managed_dll</span><span class="p">(</span><span class="n">dll_path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if a given DLL path is provided by the component&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.load_versions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_versions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.load_versions" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">load_versions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">versions_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">versions_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">version_file</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">versions</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="s2">&quot;tag_name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">version_file</span><span class="p">)]</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Invalid versions file </span><span class="si">%s</span><span class="s2">, deleting so it is downloaded on next start.&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">versions_path</span>
            <span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">versions_path</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[]</span>
    <span class="k">return</span> <span class="n">versions</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dll_manager.DLLManager.upgrade" class="doc doc-heading">
<code class="highlight language-python"><span class="n">upgrade</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dll_manager.DLLManager.upgrade" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dll_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">upgrade</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fetch_versions</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_available</span><span class="p">():</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Downloading </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">...&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">download</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unable to download </span><span class="si">%s</span><span class="s2"> because version information was not available.&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="lutris.util.wine.dxvk" class="doc doc-heading">
        <code>dxvk</code>



<a href="#lutris.util.wine.dxvk" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>DXVK helper module</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="lutris.util.wine.dxvk.DXVKManager" class="doc doc-heading">
        <code>
DXVKManager            (<a class="autorefs autorefs-internal" title="lutris.util.wine.dll_manager.DLLManager" href="dll_manager/#lutris.util.wine.dll_manager.DLLManager">DLLManager</a>)
        </code>



<a href="#lutris.util.wine.dxvk.DXVKManager" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dxvk.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DXVKManager</span><span class="p">(</span><span class="n">DLLManager</span><span class="p">):</span>
    <span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;DXVK&quot;</span>
    <span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">RUNTIME_DIR</span><span class="p">,</span> <span class="s2">&quot;dxvk&quot;</span><span class="p">)</span>
    <span class="n">versions_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s2">&quot;dxvk_versions.json&quot;</span><span class="p">)</span>
    <span class="n">managed_dlls</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;dxgi&quot;</span><span class="p">,</span> <span class="s2">&quot;d3d11&quot;</span><span class="p">,</span> <span class="s2">&quot;d3d10core&quot;</span><span class="p">,</span> <span class="s2">&quot;d3d9&quot;</span><span class="p">,</span> <span class="p">)</span>
    <span class="n">releases_url</span> <span class="o">=</span> <span class="s2">&quot;https://api.github.com/repos/lutris/dxvk/releases&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">is_managed_dll</span><span class="p">(</span><span class="n">dll_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if a given DLL path is provided by the component</span>

<span class="sd">        Very basic check to see if a dll contains the string &quot;dxvk&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">dll_path</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">prev_block_end</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">block</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">)</span>  <span class="c1"># 2 MiB</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">block</span><span class="p">:</span>
                        <span class="k">break</span>
                    <span class="k">if</span> <span class="sa">b</span><span class="s1">&#39;dxvk&#39;</span> <span class="ow">in</span> <span class="n">prev_block_end</span> <span class="o">+</span> <span class="n">block</span><span class="p">[:</span><span class="mi">4</span><span class="p">]:</span>
                        <span class="k">return</span> <span class="kc">True</span>
                    <span class="k">if</span> <span class="sa">b</span><span class="s1">&#39;dxvk&#39;</span> <span class="ow">in</span> <span class="n">block</span><span class="p">:</span>
                        <span class="k">return</span> <span class="kc">True</span>

                    <span class="n">prev_block_end</span> <span class="o">=</span> <span class="n">block</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dxvk.DXVKManager.base_dir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">base_dir</span></code>


<a href="#lutris.util.wine.dxvk.DXVKManager.base_dir" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dxvk.DXVKManager.component" class="doc doc-heading">
<code class="highlight language-python"><span class="n">component</span></code>


<a href="#lutris.util.wine.dxvk.DXVKManager.component" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dxvk.DXVKManager.managed_dlls" class="doc doc-heading">
<code class="highlight language-python"><span class="n">managed_dlls</span></code>


<a href="#lutris.util.wine.dxvk.DXVKManager.managed_dlls" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dxvk.DXVKManager.releases_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">releases_url</span></code>


<a href="#lutris.util.wine.dxvk.DXVKManager.releases_url" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dxvk.DXVKManager.versions_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">versions_path</span></code>


<a href="#lutris.util.wine.dxvk.DXVKManager.versions_path" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>






  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dxvk.DXVKManager.is_managed_dll" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_managed_dll</span><span class="p">(</span><span class="n">dll_path</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#lutris.util.wine.dxvk.DXVKManager.is_managed_dll" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Check if a given DLL path is provided by the component</p>
<p>Very basic check to see if a dll contains the string "dxvk".</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dxvk.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">is_managed_dll</span><span class="p">(</span><span class="n">dll_path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if a given DLL path is provided by the component</span>

<span class="sd">    Very basic check to see if a dll contains the string &quot;dxvk&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">dll_path</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">prev_block_end</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span>
            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">block</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">)</span>  <span class="c1"># 2 MiB</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">block</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="k">if</span> <span class="sa">b</span><span class="s1">&#39;dxvk&#39;</span> <span class="ow">in</span> <span class="n">prev_block_end</span> <span class="o">+</span> <span class="n">block</span><span class="p">[:</span><span class="mi">4</span><span class="p">]:</span>
                    <span class="k">return</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="sa">b</span><span class="s1">&#39;dxvk&#39;</span> <span class="ow">in</span> <span class="n">block</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>

                <span class="n">prev_block_end</span> <span class="o">=</span> <span class="n">block</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
    <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="lutris.util.wine.dxvk_nvapi" class="doc doc-heading">
        <code>dxvk_nvapi</code>



<a href="#lutris.util.wine.dxvk_nvapi" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager" class="doc doc-heading">
        <code>
DXVKNVAPIManager            (<a class="autorefs autorefs-internal" title="lutris.util.wine.dll_manager.DLLManager" href="dll_manager/#lutris.util.wine.dll_manager.DLLManager">DLLManager</a>)
        </code>



<a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dxvk_nvapi.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DXVKNVAPIManager</span><span class="p">(</span><span class="n">DLLManager</span><span class="p">):</span>
    <span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;DXVK-NVAPI&quot;</span>
    <span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">RUNTIME_DIR</span><span class="p">,</span> <span class="s2">&quot;dxvk-nvapi&quot;</span><span class="p">)</span>
    <span class="n">versions_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s2">&quot;dxvk-nvapi_versions.json&quot;</span><span class="p">)</span>
    <span class="n">managed_dlls</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;nvapi&quot;</span><span class="p">,</span> <span class="s2">&quot;nvapi64&quot;</span><span class="p">,</span> <span class="s2">&quot;nvml&quot;</span><span class="p">)</span>
    <span class="n">releases_url</span> <span class="o">=</span> <span class="s2">&quot;https://api.github.com/repos/lutris/dxvk-nvapi/releases&quot;</span>
    <span class="n">dlss_dlls</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;nvngx&quot;</span><span class="p">,</span> <span class="s2">&quot;_nvngx&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">disable_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_dir</span><span class="p">,</span> <span class="n">_arch</span><span class="p">,</span> <span class="n">dll</span><span class="p">):</span>  <span class="c1"># pylint: disable=unused-argument</span>
        <span class="sd">&quot;&quot;&quot;Remove DLL from Wine prefix&quot;&quot;&quot;</span>
        <span class="n">wine_dll_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.dll&quot;</span> <span class="o">%</span> <span class="n">dll</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">enable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enable Dlls for the current prefix&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
        <span class="n">dlss_dll_dir</span> <span class="o">=</span> <span class="n">get_nvidia_dll_path</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">dlss_dll_dir</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">windows_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">,</span> <span class="s2">&quot;drive_c/windows&quot;</span><span class="p">)</span>
        <span class="n">system_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">windows_path</span><span class="p">,</span> <span class="s2">&quot;system32&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">dll</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlss_dlls</span><span class="p">:</span>
            <span class="n">dll_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dlss_dll_dir</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.dll&quot;</span> <span class="o">%</span> <span class="n">dll</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">enable_dll</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="s2">&quot;x64&quot;</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">disable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disable DLLs for the current prefix&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
        <span class="n">windows_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">,</span> <span class="s2">&quot;drive_c/windows&quot;</span><span class="p">)</span>
        <span class="n">system_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">windows_path</span><span class="p">,</span> <span class="s2">&quot;system32&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">dll</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlss_dlls</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">disable_dll</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="s2">&quot;x64&quot;</span><span class="p">,</span> <span class="n">dll</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.base_dir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">base_dir</span></code>


<a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.base_dir" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.component" class="doc doc-heading">
<code class="highlight language-python"><span class="n">component</span></code>


<a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.component" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.dlss_dlls" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dlss_dlls</span></code>


<a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.dlss_dlls" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.managed_dlls" class="doc doc-heading">
<code class="highlight language-python"><span class="n">managed_dlls</span></code>


<a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.managed_dlls" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.releases_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">releases_url</span></code>


<a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.releases_url" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.versions_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">versions_path</span></code>


<a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.versions_path" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>






  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.disable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">disable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.disable" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Disable DLLs for the current prefix</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dxvk_nvapi.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">disable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Disable DLLs for the current prefix&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
    <span class="n">windows_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">,</span> <span class="s2">&quot;drive_c/windows&quot;</span><span class="p">)</span>
    <span class="n">system_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">windows_path</span><span class="p">,</span> <span class="s2">&quot;system32&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">dll</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlss_dlls</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disable_dll</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="s2">&quot;x64&quot;</span><span class="p">,</span> <span class="n">dll</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.disable_dll" class="doc doc-heading">
<code class="highlight language-python"><span class="n">disable_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_dir</span><span class="p">,</span> <span class="n">_arch</span><span class="p">,</span> <span class="n">dll</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.disable_dll" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Remove DLL from Wine prefix</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dxvk_nvapi.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">disable_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_dir</span><span class="p">,</span> <span class="n">_arch</span><span class="p">,</span> <span class="n">dll</span><span class="p">):</span>  <span class="c1"># pylint: disable=unused-argument</span>
    <span class="sd">&quot;&quot;&quot;Remove DLL from Wine prefix&quot;&quot;&quot;</span>
    <span class="n">wine_dll_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.dll&quot;</span> <span class="o">%</span> <span class="n">dll</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">wine_dll_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.enable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">enable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.dxvk_nvapi.DXVKNVAPIManager.enable" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Enable Dlls for the current prefix</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/dxvk_nvapi.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">enable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Enable Dlls for the current prefix&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
    <span class="n">dlss_dll_dir</span> <span class="o">=</span> <span class="n">get_nvidia_dll_path</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">dlss_dll_dir</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">windows_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">,</span> <span class="s2">&quot;drive_c/windows&quot;</span><span class="p">)</span>
    <span class="n">system_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">windows_path</span><span class="p">,</span> <span class="s2">&quot;system32&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">dll</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlss_dlls</span><span class="p">:</span>
        <span class="n">dll_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dlss_dll_dir</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.dll&quot;</span> <span class="o">%</span> <span class="n">dll</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_dll</span><span class="p">(</span><span class="n">system_dir</span><span class="p">,</span> <span class="s2">&quot;x64&quot;</span><span class="p">,</span> <span class="n">dll_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="lutris.util.wine.fsync" class="doc doc-heading">
        <code>fsync</code>



<a href="#lutris.util.wine.fsync" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Module for detecting the availability of the Linux futex
FUTEX_WAIT_MULTIPLE operation, or the Linux futex2 syscalls.</p>
<p>Either of these is required for fsync to work in Wine. Fsync is an
alternative implementation of the Windows synchronization primitives
that are used to guard data from being accessed by multiple threads
concurrently (which would be A Bad Thing™).</p>
<p>Fsync improves upon the previous implementation in Wine of these
primitives, known as esync, which in turn improved upon the original
implementation known as "Server-side synchronization".</p>
<p>The original implementation used a wineserver call for each
synchronization operation, which required multiple context switches per
operation.</p>
<p>Esync instead used file descriptors for synchronization, which can be
passed around between processes and therefore allowed synchronization
to happen directly between the processes involved, instead of going
through the wineserver. This made the synchronization operations
faster and improved performance of games a bit.
A problem with this implementation was that each created synchronization
object required one file descriptor, and there is only a limited amount
of these available for each process. Some games would run out of
available file descriptors, and would stop working. This has been partly
mitigated by raising the per-process file descriptor limit, but there
are also games that leak synchronization objects continuously while
running, and would eventually run out despite the raised limits.</p>
<p>Fsync improved on esync by not requiring a file descriptor for each
created synchronization object, and instead using the Linux kernel's
futex interface for synchronizations. This matches Windows's
implementation more closely and mitigated all the file descriptor
related issues of esync. However, since the default futex interface was
insufficient for implementing all required synchronization operations,
a patch to the Linux kernel was needed, which usually meant that users
needed to compile their own Linux kernel with the patch, or install a
kernel provided by a third-party. It was attempted to get the kernel
patch into the mainline Linux kernel, but it didn't get accepted.</p>
<p>Instead, patches were written that would add a new set of system calls
which extend the original futex system calls, dubbed "futex2", and the
Wine fsync code was adjusted to make use of these new system calls.
The new Wine fsync code is backwards-compatible with the old futex
patch, therefore it makes sense for now to detect the presence of
either patch in the running kernel. The detection of the old patch
can probably be removed when the new patch is merged and in a stable
Linux release.</p>
<p>This module's code is based on <a href="https://gist.github.com/openglfreak/715d5ab5902497378f1996061dbbf8ec">https://gist.github.com/openglfreak/715d5ab5902497378f1996061dbbf8ec</a></p>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.fsync.__all__" class="doc doc-heading">
<code class="highlight language-python"><span class="n">__all__</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#lutris.util.wine.fsync.__all__" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h3 id="lutris.util.wine.fsync.futex_waitv" class="doc doc-heading">
        <code>
futex_waitv            (<span title="_ctypes.Structure">Structure</span>)
        </code>



<a href="#lutris.util.wine.fsync.futex_waitv" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Linux kernel compatible futex_waitv type.</p>
<div class="admonition fields">
<p class="admonition-title">Fields</p>
<p>val: The expected value.
uaddr: The address to wait for.
flags: The type and size of the futex.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/fsync.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">futex_waitv</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">Structure</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Linux kernel compatible futex_waitv type.</span>

<span class="sd">    Fields:</span>
<span class="sd">        val: The expected value.</span>
<span class="sd">        uaddr: The address to wait for.</span>
<span class="sd">        flags: The type and size of the futex.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;val&quot;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_uint64</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;uaddr&quot;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;flags&quot;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_uint</span><span class="p">),</span>
    <span class="p">]</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.fsync.futex_waitv.__slots__" class="doc doc-heading">
<code class="highlight language-python"><span class="vm">__slots__</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#lutris.util.wine.fsync.futex_waitv.__slots__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>








  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="lutris.util.wine.fsync.timespec" class="doc doc-heading">
        <code>
timespec            (<span title="_ctypes.Structure">Structure</span>)
        </code>



<a href="#lutris.util.wine.fsync.timespec" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Linux kernel compatible timespec type.</p>
<div class="admonition fields">
<p class="admonition-title">Fields</p>
<p>tv_sec: The whole seconds of the timespec.
tv_nsec: The nanoseconds of the timespec.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/fsync.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">timespec</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">Structure</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Linux kernel compatible timespec type.</span>

<span class="sd">    Fields:</span>
<span class="sd">        tv_sec: The whole seconds of the timespec.</span>
<span class="sd">        tv_nsec: The nanoseconds of the timespec.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;tv_sec&quot;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_long</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;tv_nsec&quot;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_long</span><span class="p">),</span>
    <span class="p">]</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.fsync.timespec.__slots__" class="doc doc-heading">
<code class="highlight language-python"><span class="vm">__slots__</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#lutris.util.wine.fsync.timespec.__slots__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>








  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.fsync.is_fsync_supported" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_fsync_supported</span><span class="p">()</span></code>


<a href="#lutris.util.wine.fsync.is_fsync_supported" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Checks whether the FUTEX_WAIT_MULTIPLE operation, the futex2
syscalls, or the futex_waitv syscall is supported on this kernel.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td></td>
      <td><p>The result of the check.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/fsync.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">is_fsync_supported</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Checks whether the FUTEX_WAIT_MULTIPLE operation, the futex2</span>
<span class="sd">    syscalls, or the futex_waitv syscall is supported on this kernel.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The result of the check.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">is_futex_waitv_supported</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="n">is_futex2_supported</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="n">is_futex_wait_multiple_supported</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.fsync.is_futex2_supported" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_futex2_supported</span><span class="p">()</span></code>


<a href="#lutris.util.wine.fsync.is_futex2_supported" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Checks whether the Linux futex2 syscall is supported on this
kernel.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td></td>
      <td><p>Whether this kernel supports the futex2 syscall.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/fsync.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">is_futex2_supported</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Checks whether the Linux futex2 syscall is supported on this</span>
<span class="sd">    kernel.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether this kernel supports the futex2 syscall.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;wait&quot;</span><span class="p">,</span> <span class="s2">&quot;waitv&quot;</span><span class="p">,</span> <span class="s2">&quot;wake&quot;</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/sys/kernel/futex2/&quot;</span> <span class="o">+</span> <span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
                    <span class="k">return</span> <span class="kc">False</span>
    <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.fsync.is_futex_wait_multiple_supported" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_futex_wait_multiple_supported</span><span class="p">()</span></code>


<a href="#lutris.util.wine.fsync.is_futex_wait_multiple_supported" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Checks whether the Linux futex FUTEX_WAIT_MULTIPLE operation is
supported on this kernel.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td></td>
      <td><p>Whether this kernel supports the FUTEX_WAIT_MULTIPLE operation.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/fsync.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">is_futex_wait_multiple_supported</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Checks whether the Linux futex FUTEX_WAIT_MULTIPLE operation is</span>
<span class="sd">    supported on this kernel.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether this kernel supports the FUTEX_WAIT_MULTIPLE operation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">_get_futex_wait_multiple_op</span><span class="p">(</span><span class="n">_get_futex_syscall</span><span class="p">())</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">RuntimeError</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.fsync.is_futex_waitv_supported" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_futex_waitv_supported</span><span class="p">()</span></code>


<a href="#lutris.util.wine.fsync.is_futex_waitv_supported" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Checks whether the Linux 5.16 futex_waitv syscall is supported on
this kernel.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td></td>
      <td><p>Whether this kernel supports the futex_waitv syscall.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/fsync.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">is_futex_waitv_supported</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Checks whether the Linux 5.16 futex_waitv syscall is supported on</span>
<span class="sd">    this kernel.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether this kernel supports the futex_waitv syscall.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">_get_futex_waitv_syscall</span><span class="p">()(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">errno</span><span class="o">.</span><span class="n">ENOSYS</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">RuntimeError</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="lutris.util.wine.prefix" class="doc doc-heading">
        <code>prefix</code>



<a href="#lutris.util.wine.prefix" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Wine prefix management</p>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.prefix.DEFAULT_DESKTOP_FOLDERS" class="doc doc-heading">
<code class="highlight language-python"><span class="n">DEFAULT_DESKTOP_FOLDERS</span></code>


<a href="#lutris.util.wine.prefix.DEFAULT_DESKTOP_FOLDERS" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.prefix.DEFAULT_DLL_OVERRIDES" class="doc doc-heading">
<code class="highlight language-python"><span class="n">DEFAULT_DLL_OVERRIDES</span></code>


<a href="#lutris.util.wine.prefix.DEFAULT_DLL_OVERRIDES" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.prefix.DESKTOP_KEYS" class="doc doc-heading">
<code class="highlight language-python"><span class="n">DESKTOP_KEYS</span></code>


<a href="#lutris.util.wine.prefix.DESKTOP_KEYS" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.prefix.DESKTOP_XDG" class="doc doc-heading">
<code class="highlight language-python"><span class="n">DESKTOP_XDG</span></code>


<a href="#lutris.util.wine.prefix.DESKTOP_XDG" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h3 id="lutris.util.wine.prefix.WinePrefixManager" class="doc doc-heading">
        <code>
WinePrefixManager        </code>



<a href="#lutris.util.wine.prefix.WinePrefixManager" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Class to allow modification of Wine prefixes without the use of Wine</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">WinePrefixManager</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Class to allow modification of Wine prefixes without the use of Wine&quot;&quot;&quot;</span>

    <span class="n">hkcu_prefix</span> <span class="o">=</span> <span class="s2">&quot;HKEY_CURRENT_USER&quot;</span>
    <span class="n">hklm_prefix</span> <span class="o">=</span> <span class="s2">&quot;HKEY_LOCAL_MACHINE&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No path specified for Wine prefix&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">user_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the directory that contains the current user&#39;s profile in the WINE prefix.&quot;&quot;&quot;</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;USER&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;lutrisuser&#39;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;drive_c/users/&quot;</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">appdata_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the app-data directory for the user; this depends on a registry key.&quot;&quot;&quot;</span>
        <span class="n">user_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_dir</span>
        <span class="n">folder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_registry_key</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Microsoft/Windows/CurrentVersion/Explorer/Shell Folders&quot;</span><span class="p">,</span>
            <span class="s2">&quot;AppData&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Don&#39;t try to resolve the WIndows path we get- there&#39;s</span>
        <span class="c1"># just two options, the Vista-and later option and the</span>
        <span class="c1"># XP-and-earlier option.</span>
        <span class="k">if</span> <span class="n">folder</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">application data&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">user_dir</span><span class="p">,</span> <span class="s2">&quot;Application Data&quot;</span><span class="p">)</span>  <span class="c1"># Windows XP</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">user_dir</span><span class="p">,</span> <span class="s2">&quot;AppData/Roaming&quot;</span><span class="p">)</span>  <span class="c1"># Vista</span>

    <span class="k">def</span> <span class="nf">setup_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the defaults for newly created prefixes&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">dll</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">DEFAULT_DLL_OVERRIDES</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">override_dll</span><span class="p">(</span><span class="n">dll</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">desktop_integration</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to setup desktop integration, the prefix may not be valid.&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_registry_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Matches registry keys to a registry file</span>

<span class="sd">        Currently, only HKEY_CURRENT_USER keys are supported.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;user.reg&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hklm_prefix</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;system.reg&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsupported key &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_key_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hklm_prefix</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">key</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The key </span><span class="si">{}</span><span class="s2"> is currently not supported by WinePrefixManager&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_registry_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">subkey</span><span class="p">):</span>
        <span class="n">registry</span> <span class="o">=</span> <span class="n">WineRegistry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_registry_path</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">registry</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_key_path</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">subkey</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_registry_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">subkey</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">registry</span> <span class="o">=</span> <span class="n">WineRegistry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_registry_path</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_key_path</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">subkey</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">clear_registry_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="n">registry</span> <span class="o">=</span> <span class="n">WineRegistry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_registry_path</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">clear_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_key_path</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">clear_registry_subkeys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">subkeys</span><span class="p">):</span>
        <span class="n">registry</span> <span class="o">=</span> <span class="n">WineRegistry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_registry_path</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">clear_subkeys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_key_path</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">subkeys</span><span class="p">)</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">override_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Wine/DllOverrides&quot;</span>
        <span class="k">if</span> <span class="n">mode</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;dis&quot;</span><span class="p">):</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;builtin&quot;</span><span class="p">,</span> <span class="s2">&quot;native&quot;</span><span class="p">,</span> <span class="s2">&quot;builtin,native&quot;</span><span class="p">,</span> <span class="s2">&quot;native,builtin&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;DLL override &#39;</span><span class="si">%s</span><span class="s2">&#39; mode is not valid&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">dll</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_desktop_folders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the list of desktop folder names loaded from the Windows registry&quot;&quot;&quot;</span>
        <span class="n">desktop_folders</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">DESKTOP_KEYS</span><span class="p">:</span>
            <span class="n">folder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_registry_key</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Microsoft/Windows/CurrentVersion/Explorer/Shell Folders&quot;</span><span class="p">,</span>
                <span class="n">key</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">folder</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t load shell folder name for </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">desktop_folders</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">folder</span><span class="p">[</span><span class="n">folder</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:])</span>
        <span class="k">return</span> <span class="n">desktop_folders</span> <span class="ow">or</span> <span class="n">DEFAULT_DESKTOP_FOLDERS</span>

    <span class="k">def</span> <span class="nf">desktop_integration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desktop_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">restore</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>  <span class="c1"># noqa: C901</span>
        <span class="sd">&quot;&quot;&quot;Overwrite desktop integration&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=too-many-branches</span>
        <span class="c1"># TODO: reduce complexity (18)</span>
        <span class="n">user_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_dir</span>
        <span class="n">desktop_folders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_desktop_folders</span><span class="p">()</span>
        <span class="n">desktop_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">desktop_dir</span><span class="p">)</span> <span class="k">if</span> <span class="n">desktop_dir</span> <span class="k">else</span> <span class="n">user_dir</span>

        <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">user_dir</span><span class="p">):</span>
            <span class="c1"># Replace or restore desktop integration symlinks</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">desktop_folders</span><span class="p">):</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">user_dir</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
                <span class="n">old_path</span> <span class="o">=</span> <span class="n">path</span> <span class="o">+</span> <span class="s2">&quot;.winecfg&quot;</span>

                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">restore</span><span class="p">:</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                    <span class="c1"># We can&#39;t delete nonempty dir, so we rename as wine do.</span>
                    <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">old_path</span><span class="p">)</span>

                <span class="c1"># if we want to create a symlink and one is already there, just</span>
                <span class="c1"># skip to the next item.  this also makes sure the elif doesn&#39;t</span>
                <span class="c1"># find a dir (isdir only looks at the target of the symlink).</span>
                <span class="k">if</span> <span class="n">restore</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="n">restore</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
                    <span class="n">src_path</span> <span class="o">=</span> <span class="n">get_xdg_entry</span><span class="p">(</span><span class="n">DESKTOP_XDG</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">src_path</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;No XDG entry found for </span><span class="si">%s</span><span class="s2">, launcher not created&quot;</span><span class="p">,</span> <span class="n">DESKTOP_XDG</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">symlink</span><span class="p">(</span><span class="n">src_path</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
                    <span class="c1"># We don&#39;t need all the others process of the loop</span>
                    <span class="k">continue</span>

                <span class="k">if</span> <span class="n">desktop_dir</span> <span class="o">!=</span> <span class="n">user_dir</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">src_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">desktop_dir</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                        <span class="c1"># There is supposedly a None value in there</span>
                        <span class="c1"># The current code shouldn&#39;t allow that</span>
                        <span class="c1"># Just raise a exception with the values</span>
                        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Missing value desktop_dir=</span><span class="si">%s</span><span class="s2"> or item=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">desktop_dir</span><span class="p">,</span> <span class="n">item</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">ex</span>

                    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">src_path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">symlink</span><span class="p">(</span><span class="n">src_path</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># We use first the renamed dir, otherwise we make it.</span>
                    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">old_path</span><span class="p">):</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">old_path</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_crash_dialogs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enable or diable Wine crash dialogs&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Wine/WineDbg&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ShowCrashDialog&quot;</span><span class="p">,</span>
            <span class="mi">1</span> <span class="k">if</span> <span class="n">enabled</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_virtual_desktop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enable or disable wine virtual desktop.</span>
<span class="sd">        The Lutris virtual desktop is refered to as &#39;WineDesktop&#39;, in Wine the</span>
<span class="sd">        virtual desktop name is &#39;default&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Wine/Explorer&quot;</span>
        <span class="k">if</span> <span class="n">enabled</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;Desktop&quot;</span><span class="p">,</span> <span class="s2">&quot;WineDesktop&quot;</span><span class="p">)</span>
            <span class="n">default_resolution</span> <span class="o">=</span> <span class="s2">&quot;x&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DISPLAY_MANAGER</span><span class="o">.</span><span class="n">get_current_resolution</span><span class="p">())</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Enabling wine virtual desktop with default resolution of </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">default_resolution</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Wine/Explorer/Desktops&quot;</span><span class="p">,</span>
                <span class="s2">&quot;WineDesktop&quot;</span><span class="p">,</span>
                <span class="n">default_resolution</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clear_registry_key</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_desktop_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desktop_size</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the desktop size if one is given but do not reset the key if</span>
<span class="sd">        one isn&#39;t.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Wine/Explorer/Desktops&quot;</span>
        <span class="k">if</span> <span class="n">desktop_size</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;WineDesktop&quot;</span><span class="p">,</span> <span class="n">desktop_size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_dpi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dpi</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the DPI for WINE to use. 96 DPI is effectively unscaled.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Wine/Fonts&quot;</span><span class="p">,</span> <span class="s2">&quot;LogPixels&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Control Panel/Desktop&quot;</span><span class="p">,</span> <span class="s2">&quot;LogPixels&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">configure_joypads</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disables some joypad devices&quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Wine/DirectInput/Joysticks&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_registry_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_device</span><span class="p">,</span> <span class="n">joypad_name</span> <span class="ow">in</span> <span class="n">joypad</span><span class="o">.</span><span class="n">get_joypads</span><span class="p">():</span>
            <span class="c1"># Attempt at disabling mice that register as joysticks.</span>
            <span class="c1"># Although, those devices aren&#39;t returned by `get_joypads`</span>
            <span class="c1"># A better way would be to read /dev/input files directly.</span>
            <span class="k">if</span> <span class="s2">&quot;HARPOON RGB&quot;</span> <span class="ow">in</span> <span class="n">joypad_name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> (js)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">joypad_name</span><span class="p">),</span> <span class="s2">&quot;disabled&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> (event)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">joypad_name</span><span class="p">),</span> <span class="s2">&quot;disabled&quot;</span><span class="p">)</span>

        <span class="c1"># This part of the code below avoids having 2 joystick interfaces</span>
        <span class="c1"># showing up simulatenously. It is not sure if it&#39;s still needed</span>
        <span class="c1"># so it is disabled for now. Street Fighter IV now runs in Proton</span>
        <span class="c1"># without this sort of hack.</span>
        <span class="c1">#</span>
        <span class="c1"># for device, joypad_name in joypads:</span>
        <span class="c1">#     if &quot;event&quot; in device:</span>
        <span class="c1">#         disabled_joypad = &quot;{} (js)&quot;.format(joypad_name)</span>
        <span class="c1">#     else:</span>
        <span class="c1">#         disabled_joypad = &quot;{} (event)&quot;.format(joypad_name)</span>
        <span class="c1">#     self.set_registry_key(key, disabled_joypad, &quot;disabled&quot;)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.appdata_dir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">appdata_dir</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#lutris.util.wine.prefix.WinePrefixManager.appdata_dir" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Returns the app-data directory for the user; this depends on a registry key.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.hkcu_prefix" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hkcu_prefix</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.hkcu_prefix" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.hklm_prefix" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hklm_prefix</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.hklm_prefix" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.user_dir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">user_dir</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#lutris.util.wine.prefix.WinePrefixManager.user_dir" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Returns the directory that contains the current user's profile in the WINE prefix.</p>
    </div>

  </div>






  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#lutris.util.wine.prefix.WinePrefixManager.__init__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No path specified for Wine prefix&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.clear_registry_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clear_registry_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.clear_registry_key" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">clear_registry_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
    <span class="n">registry</span> <span class="o">=</span> <span class="n">WineRegistry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_registry_path</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
    <span class="n">registry</span><span class="o">.</span><span class="n">clear_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_key_path</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
    <span class="n">registry</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.clear_registry_subkeys" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clear_registry_subkeys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">subkeys</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.clear_registry_subkeys" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">clear_registry_subkeys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">subkeys</span><span class="p">):</span>
    <span class="n">registry</span> <span class="o">=</span> <span class="n">WineRegistry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_registry_path</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
    <span class="n">registry</span><span class="o">.</span><span class="n">clear_subkeys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_key_path</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">subkeys</span><span class="p">)</span>
    <span class="n">registry</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.configure_joypads" class="doc doc-heading">
<code class="highlight language-python"><span class="n">configure_joypads</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.configure_joypads" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Disables some joypad devices</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">configure_joypads</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Disables some joypad devices&quot;&quot;&quot;</span>
    <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Wine/DirectInput/Joysticks&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear_registry_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">_device</span><span class="p">,</span> <span class="n">joypad_name</span> <span class="ow">in</span> <span class="n">joypad</span><span class="o">.</span><span class="n">get_joypads</span><span class="p">():</span>
        <span class="c1"># Attempt at disabling mice that register as joysticks.</span>
        <span class="c1"># Although, those devices aren&#39;t returned by `get_joypads`</span>
        <span class="c1"># A better way would be to read /dev/input files directly.</span>
        <span class="k">if</span> <span class="s2">&quot;HARPOON RGB&quot;</span> <span class="ow">in</span> <span class="n">joypad_name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> (js)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">joypad_name</span><span class="p">),</span> <span class="s2">&quot;disabled&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> (event)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">joypad_name</span><span class="p">),</span> <span class="s2">&quot;disabled&quot;</span><span class="p">)</span>

    <span class="c1"># This part of the code below avoids having 2 joystick interfaces</span>
    <span class="c1"># showing up simulatenously. It is not sure if it&#39;s still needed</span>
    <span class="c1"># so it is disabled for now. Street Fighter IV now runs in Proton</span>
    <span class="c1"># without this sort of hack.</span>
    <span class="c1">#</span>
    <span class="c1"># for device, joypad_name in joypads:</span>
    <span class="c1">#     if &quot;event&quot; in device:</span>
    <span class="c1">#         disabled_joypad = &quot;{} (js)&quot;.format(joypad_name)</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         disabled_joypad = &quot;{} (event)&quot;.format(joypad_name)</span>
    <span class="c1">#     self.set_registry_key(key, disabled_joypad, &quot;disabled&quot;)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.desktop_integration" class="doc doc-heading">
<code class="highlight language-python"><span class="n">desktop_integration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desktop_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">restore</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.desktop_integration" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Overwrite desktop integration</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">desktop_integration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desktop_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">restore</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>  <span class="c1"># noqa: C901</span>
    <span class="sd">&quot;&quot;&quot;Overwrite desktop integration&quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=too-many-branches</span>
    <span class="c1"># TODO: reduce complexity (18)</span>
    <span class="n">user_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_dir</span>
    <span class="n">desktop_folders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_desktop_folders</span><span class="p">()</span>
    <span class="n">desktop_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">desktop_dir</span><span class="p">)</span> <span class="k">if</span> <span class="n">desktop_dir</span> <span class="k">else</span> <span class="n">user_dir</span>

    <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">user_dir</span><span class="p">):</span>
        <span class="c1"># Replace or restore desktop integration symlinks</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">desktop_folders</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">user_dir</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="n">old_path</span> <span class="o">=</span> <span class="n">path</span> <span class="o">+</span> <span class="s2">&quot;.winecfg&quot;</span>

            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">restore</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                <span class="c1"># We can&#39;t delete nonempty dir, so we rename as wine do.</span>
                <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">old_path</span><span class="p">)</span>

            <span class="c1"># if we want to create a symlink and one is already there, just</span>
            <span class="c1"># skip to the next item.  this also makes sure the elif doesn&#39;t</span>
            <span class="c1"># find a dir (isdir only looks at the target of the symlink).</span>
            <span class="k">if</span> <span class="n">restore</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">restore</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
                <span class="n">src_path</span> <span class="o">=</span> <span class="n">get_xdg_entry</span><span class="p">(</span><span class="n">DESKTOP_XDG</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">src_path</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;No XDG entry found for </span><span class="si">%s</span><span class="s2">, launcher not created&quot;</span><span class="p">,</span> <span class="n">DESKTOP_XDG</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">symlink</span><span class="p">(</span><span class="n">src_path</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
                <span class="c1"># We don&#39;t need all the others process of the loop</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">desktop_dir</span> <span class="o">!=</span> <span class="n">user_dir</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">src_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">desktop_dir</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                    <span class="c1"># There is supposedly a None value in there</span>
                    <span class="c1"># The current code shouldn&#39;t allow that</span>
                    <span class="c1"># Just raise a exception with the values</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Missing value desktop_dir=</span><span class="si">%s</span><span class="s2"> or item=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">desktop_dir</span><span class="p">,</span> <span class="n">item</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">ex</span>

                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">src_path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">symlink</span><span class="p">(</span><span class="n">src_path</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># We use first the renamed dir, otherwise we make it.</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">old_path</span><span class="p">):</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">old_path</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.get_desktop_folders" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_desktop_folders</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.get_desktop_folders" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the list of desktop folder names loaded from the Windows registry</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_desktop_folders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the list of desktop folder names loaded from the Windows registry&quot;&quot;&quot;</span>
    <span class="n">desktop_folders</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">DESKTOP_KEYS</span><span class="p">:</span>
        <span class="n">folder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_registry_key</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Microsoft/Windows/CurrentVersion/Explorer/Shell Folders&quot;</span><span class="p">,</span>
            <span class="n">key</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">folder</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t load shell folder name for </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="n">desktop_folders</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">folder</span><span class="p">[</span><span class="n">folder</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:])</span>
    <span class="k">return</span> <span class="n">desktop_folders</span> <span class="ow">or</span> <span class="n">DEFAULT_DESKTOP_FOLDERS</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.get_key_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_key_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.get_key_path" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_key_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hklm_prefix</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">key</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The key </span><span class="si">{}</span><span class="s2"> is currently not supported by WinePrefixManager&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.get_registry_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_registry_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">subkey</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.get_registry_key" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_registry_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">subkey</span><span class="p">):</span>
    <span class="n">registry</span> <span class="o">=</span> <span class="n">WineRegistry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_registry_path</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">registry</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_key_path</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">subkey</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.get_registry_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_registry_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.get_registry_path" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Matches registry keys to a registry file</p>
<p>Currently, only HKEY_CURRENT_USER keys are supported.</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_registry_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Matches registry keys to a registry file</span>

<span class="sd">    Currently, only HKEY_CURRENT_USER keys are supported.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;user.reg&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hklm_prefix</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;system.reg&quot;</span><span class="p">)</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsupported key &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.override_dll" class="doc doc-heading">
<code class="highlight language-python"><span class="n">override_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.override_dll" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">override_dll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dll</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
    <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Wine/DllOverrides&quot;</span>
    <span class="k">if</span> <span class="n">mode</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;dis&quot;</span><span class="p">):</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;builtin&quot;</span><span class="p">,</span> <span class="s2">&quot;native&quot;</span><span class="p">,</span> <span class="s2">&quot;builtin,native&quot;</span><span class="p">,</span> <span class="s2">&quot;native,builtin&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;DLL override &#39;</span><span class="si">%s</span><span class="s2">&#39; mode is not valid&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">dll</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.set_crash_dialogs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_crash_dialogs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.set_crash_dialogs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Enable or diable Wine crash dialogs</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_crash_dialogs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Enable or diable Wine crash dialogs&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Wine/WineDbg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ShowCrashDialog&quot;</span><span class="p">,</span>
        <span class="mi">1</span> <span class="k">if</span> <span class="n">enabled</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.set_desktop_size" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_desktop_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desktop_size</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.set_desktop_size" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Sets the desktop size if one is given but do not reset the key if
one isn't.</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_desktop_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desktop_size</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets the desktop size if one is given but do not reset the key if</span>
<span class="sd">    one isn&#39;t.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Wine/Explorer/Desktops&quot;</span>
    <span class="k">if</span> <span class="n">desktop_size</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;WineDesktop&quot;</span><span class="p">,</span> <span class="n">desktop_size</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.set_dpi" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_dpi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dpi</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.set_dpi" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Sets the DPI for WINE to use. 96 DPI is effectively unscaled.</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_dpi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dpi</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets the DPI for WINE to use. 96 DPI is effectively unscaled.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Wine/Fonts&quot;</span><span class="p">,</span> <span class="s2">&quot;LogPixels&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Control Panel/Desktop&quot;</span><span class="p">,</span> <span class="s2">&quot;LogPixels&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.set_registry_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_registry_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">subkey</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.set_registry_key" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_registry_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">subkey</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">registry</span> <span class="o">=</span> <span class="n">WineRegistry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_registry_path</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
    <span class="n">registry</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_key_path</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">subkey</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">registry</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.set_virtual_desktop" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_virtual_desktop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.set_virtual_desktop" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Enable or disable wine virtual desktop.
The Lutris virtual desktop is refered to as 'WineDesktop', in Wine the
virtual desktop name is 'default'.</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_virtual_desktop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Enable or disable wine virtual desktop.</span>
<span class="sd">    The Lutris virtual desktop is refered to as &#39;WineDesktop&#39;, in Wine the</span>
<span class="sd">    virtual desktop name is &#39;default&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Wine/Explorer&quot;</span>
    <span class="k">if</span> <span class="n">enabled</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;Desktop&quot;</span><span class="p">,</span> <span class="s2">&quot;WineDesktop&quot;</span><span class="p">)</span>
        <span class="n">default_resolution</span> <span class="o">=</span> <span class="s2">&quot;x&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DISPLAY_MANAGER</span><span class="o">.</span><span class="n">get_current_resolution</span><span class="p">())</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Enabling wine virtual desktop with default resolution of </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">default_resolution</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_registry_key</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hkcu_prefix</span> <span class="o">+</span> <span class="s2">&quot;/Software/Wine/Explorer/Desktops&quot;</span><span class="p">,</span>
            <span class="s2">&quot;WineDesktop&quot;</span><span class="p">,</span>
            <span class="n">default_resolution</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_registry_key</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.prefix.WinePrefixManager.setup_defaults" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setup_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.WinePrefixManager.setup_defaults" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Sets the defaults for newly created prefixes</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">setup_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets the defaults for newly created prefixes&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">dll</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">DEFAULT_DLL_OVERRIDES</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">override_dll</span><span class="p">(</span><span class="n">dll</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">desktop_integration</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to setup desktop integration, the prefix may not be valid.&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.prefix.find_prefix" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_prefix</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.find_prefix" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Given an executable path, try to find a Wine prefix associated with it.</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_prefix</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Given an executable path, try to find a Wine prefix associated with it.&quot;&quot;&quot;</span>
    <span class="n">dir_path</span> <span class="o">=</span> <span class="n">path</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">dir_path</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;No path given, unable to guess prefix location&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">while</span> <span class="n">dir_path</span> <span class="o">!=</span> <span class="s2">&quot;/&quot;</span> <span class="ow">and</span> <span class="n">dir_path</span><span class="p">:</span>
        <span class="n">dir_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_prefix</span><span class="p">(</span><span class="n">dir_path</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">dir_path</span>
        <span class="k">for</span> <span class="n">prefix_dir</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;prefix&quot;</span><span class="p">,</span> <span class="s2">&quot;pfx&quot;</span><span class="p">):</span>
            <span class="n">prefix_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">prefix_dir</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">is_prefix</span><span class="p">(</span><span class="n">prefix_path</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">prefix_path</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.prefix.is_prefix" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_prefix</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.prefix.is_prefix" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return True if the path is prefix</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/prefix.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_prefix</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return True if the path is prefix&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;drive_c&quot;</span><span class="p">))</span> \
        <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;user.reg&quot;</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="lutris.util.wine.registry" class="doc doc-heading">
        <code>registry</code>



<a href="#lutris.util.wine.registry" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Manipulate Wine registry files</p>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.registry.DATA_TYPES" class="doc doc-heading">
<code class="highlight language-python"><span class="n">DATA_TYPES</span></code>


<a href="#lutris.util.wine.registry.DATA_TYPES" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.registry.REG_BINARY" class="doc doc-heading">
<code class="highlight language-python"><span class="n">REG_BINARY</span></code>


<a href="#lutris.util.wine.registry.REG_BINARY" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.registry.REG_DWORD" class="doc doc-heading">
<code class="highlight language-python"><span class="n">REG_DWORD</span></code>


<a href="#lutris.util.wine.registry.REG_DWORD" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.registry.REG_DWORD_BIG_ENDIAN" class="doc doc-heading">
<code class="highlight language-python"><span class="n">REG_DWORD_BIG_ENDIAN</span></code>


<a href="#lutris.util.wine.registry.REG_DWORD_BIG_ENDIAN" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.registry.REG_EXPAND_SZ" class="doc doc-heading">
<code class="highlight language-python"><span class="n">REG_EXPAND_SZ</span></code>


<a href="#lutris.util.wine.registry.REG_EXPAND_SZ" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.registry.REG_LINK" class="doc doc-heading">
<code class="highlight language-python"><span class="n">REG_LINK</span></code>


<a href="#lutris.util.wine.registry.REG_LINK" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.registry.REG_MULTI_SZ" class="doc doc-heading">
<code class="highlight language-python"><span class="n">REG_MULTI_SZ</span></code>


<a href="#lutris.util.wine.registry.REG_MULTI_SZ" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.registry.REG_NONE" class="doc doc-heading">
<code class="highlight language-python"><span class="n">REG_NONE</span></code>


<a href="#lutris.util.wine.registry.REG_NONE" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.registry.REG_SZ" class="doc doc-heading">
<code class="highlight language-python"><span class="n">REG_SZ</span></code>


<a href="#lutris.util.wine.registry.REG_SZ" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h3 id="lutris.util.wine.registry.WindowsFileTime" class="doc doc-heading">
        <code>
WindowsFileTime        </code>



<a href="#lutris.util.wine.registry.WindowsFileTime" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Utility class to deal with Windows FILETIME structures.</p>
<p>See: <a href="https://msdn.microsoft.com/en-us/library/ms724284(v=vs.85).aspx">https://msdn.microsoft.com/en-us/library/ms724284(v=vs.85).aspx</a></p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">WindowsFileTime</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot;Utility class to deal with Windows FILETIME structures.</span>

<span class="sd">    See: https://msdn.microsoft.com/en-us/library/ms724284(v=vs.85).aspx</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ticks_per_seconds</span> <span class="o">=</span> <span class="mi">10000000</span>  <span class="c1"># 1 tick every 100 nanoseconds</span>
    <span class="n">epoch_delta</span> <span class="o">=</span> <span class="mi">11644473600</span>  <span class="c1"># 3600 * 24 * ((1970 - 1601) * 365 + 89)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">{}</span><span class="s2">&gt;: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_hex</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">hexvalue</span><span class="p">):</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hexvalue</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">WindowsFileTime</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_hex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{:x}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_unix_timestamp</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">):</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="bp">cls</span><span class="o">.</span><span class="n">epoch_delta</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">timestamp</span> <span class="o">*</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ticks_per_seconds</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">WindowsFileTime</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_unix_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No timestamp set&quot;</span><span class="p">)</span>
        <span class="n">unix_ts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ticks_per_seconds</span>
        <span class="n">unix_ts</span> <span class="o">=</span> <span class="n">unix_ts</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">epoch_delta</span>
        <span class="k">return</span> <span class="n">unix_ts</span>

    <span class="k">def</span> <span class="nf">to_date_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_unix_timestamp</span><span class="p">())</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.registry.WindowsFileTime.epoch_delta" class="doc doc-heading">
<code class="highlight language-python"><span class="n">epoch_delta</span></code>


<a href="#lutris.util.wine.registry.WindowsFileTime.epoch_delta" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.registry.WindowsFileTime.ticks_per_seconds" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ticks_per_seconds</span></code>


<a href="#lutris.util.wine.registry.WindowsFileTime.ticks_per_seconds" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>






  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WindowsFileTime.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#lutris.util.wine.registry.WindowsFileTime.__init__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WindowsFileTime.__repr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#lutris.util.wine.registry.WindowsFileTime.__repr__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">{}</span><span class="s2">&gt;: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WindowsFileTime.from_hex" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_hex</span><span class="p">(</span><span class="n">hexvalue</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#lutris.util.wine.registry.WindowsFileTime.from_hex" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_hex</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">hexvalue</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hexvalue</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">WindowsFileTime</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WindowsFileTime.from_unix_timestamp" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_unix_timestamp</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#lutris.util.wine.registry.WindowsFileTime.from_unix_timestamp" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_unix_timestamp</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="bp">cls</span><span class="o">.</span><span class="n">epoch_delta</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">timestamp</span> <span class="o">*</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ticks_per_seconds</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">WindowsFileTime</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WindowsFileTime.to_date_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_date_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WindowsFileTime.to_date_time" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">to_date_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_unix_timestamp</span><span class="p">())</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WindowsFileTime.to_hex" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_hex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WindowsFileTime.to_hex" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">to_hex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{:x}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WindowsFileTime.to_unix_timestamp" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_unix_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WindowsFileTime.to_unix_timestamp" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">to_unix_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No timestamp set&quot;</span><span class="p">)</span>
    <span class="n">unix_ts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ticks_per_seconds</span>
    <span class="n">unix_ts</span> <span class="o">=</span> <span class="n">unix_ts</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">epoch_delta</span>
    <span class="k">return</span> <span class="n">unix_ts</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="lutris.util.wine.registry.WineRegistry" class="doc doc-heading">
        <code>
WineRegistry        </code>



<a href="#lutris.util.wine.registry.WineRegistry" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">WineRegistry</span><span class="p">:</span>
    <span class="n">version_header</span> <span class="o">=</span> <span class="s2">&quot;WINE REGISTRY Version &quot;</span>
    <span class="n">relative_to_header</span> <span class="o">=</span> <span class="s2">&quot;;; All keys relative to &quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reg_filename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arch</span> <span class="o">=</span> <span class="n">WINE_DEFAULT_ARCH</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relative_to</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\\\\</span><span class="s2">User</span><span class="se">\\\\</span><span class="s2">S-1-5-21-0-0-0-1000&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keys</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reg_filename</span> <span class="o">=</span> <span class="n">reg_filename</span>
        <span class="k">if</span> <span class="n">reg_filename</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">reg_filename</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;No registry file at </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">reg_filename</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parse_reg_file</span><span class="p">(</span><span class="n">reg_filename</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Windows Registry @ </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">reg_filename</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">prefix_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the Wine prefix path (where the .reg files are located)&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reg_filename</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reg_filename</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_raw_registry</span><span class="p">(</span><span class="n">reg_filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an array of the unprocessed contents of a registry file&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">reg_filename</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">reg_filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reg_file</span><span class="p">:</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">registry_content</span> <span class="o">=</span> <span class="n">reg_file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>  <span class="c1"># pylint: disable=broad-except</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to registry read </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">reg_filename</span><span class="p">)</span>
                <span class="n">registry_content</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">registry_content</span>

    <span class="k">def</span> <span class="nf">parse_reg_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reg_filename</span><span class="p">):</span>
        <span class="n">registry_lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_raw_registry</span><span class="p">(</span><span class="n">reg_filename</span><span class="p">)</span>
        <span class="n">current_key</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">add_next_to_value</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">additional_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">registry_lines</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">):</span>
                <span class="n">current_key</span> <span class="o">=</span> <span class="n">WineRegistryKey</span><span class="p">(</span><span class="n">key_def</span><span class="o">=</span><span class="n">line</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">[</span><span class="n">current_key</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">current_key</span>
            <span class="k">elif</span> <span class="n">current_key</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">add_next_to_value</span><span class="p">:</span>
                    <span class="n">additional_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">add_next_to_value</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">additional_values</span><span class="p">:</span>
                        <span class="n">additional_values</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">additional_values</span><span class="p">)</span>
                        <span class="n">current_key</span><span class="o">.</span><span class="n">add_to_last</span><span class="p">(</span><span class="n">additional_values</span><span class="p">)</span>
                        <span class="n">additional_values</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">current_key</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="n">add_next_to_value</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version_header</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version_header</span><span class="p">):])</span>
            <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relative_to_header</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">relative_to</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relative_to_header</span><span class="p">):]</span>
            <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#arch&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">arch</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version_header</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
        <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">{}{}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relative_to_header</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative_to</span><span class="p">)</span>
        <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;#arch=</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">arch</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">content</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">content</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write the registry to a file&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reg_filename</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="s2">&quot;No filename provided&quot;</span><span class="p">)</span>
        <span class="n">prefix_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">prefix_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid Wine prefix path </span><span class="si">%s</span><span class="s2">, make sure to &quot;</span>
                <span class="s2">&quot;create the prefix before saving to a registry&quot;</span> <span class="o">%</span> <span class="n">prefix_path</span>
            <span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">registry_file</span><span class="p">:</span>
            <span class="n">registry_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">subkey</span><span class="p">):</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">key</span><span class="o">.</span><span class="n">get_subkey</span><span class="p">(</span><span class="n">subkey</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">subkey</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">WineRegistryKey</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span>
        <span class="n">key</span><span class="o">.</span><span class="n">set_subkey</span><span class="p">(</span><span class="n">subkey</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">clear_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes all subkeys from a key&quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">key</span><span class="o">.</span><span class="n">subkeys</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">clear_subkeys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove some subkeys from a key&quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">subkey</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">subkeys</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">subkey</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">key</span><span class="o">.</span><span class="n">subkeys</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">subkey</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_unix_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">windows_path</span><span class="p">):</span>
        <span class="n">windows_path</span> <span class="o">=</span> <span class="n">windows_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_path</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">drives_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix_path</span><span class="p">,</span> <span class="s2">&quot;dosdevices&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">drives_path</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="n">letter</span><span class="p">,</span> <span class="n">relpath</span> <span class="o">=</span> <span class="n">windows_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">relpath</span> <span class="o">=</span> <span class="n">relpath</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="n">drive_link</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">drives_path</span><span class="p">,</span> <span class="n">letter</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">drive_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">readlink</span><span class="p">(</span><span class="n">drive_link</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Unable to read link for </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">drive_link</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">drive_path</span><span class="p">):</span>
            <span class="n">drive_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">drives_path</span><span class="p">,</span> <span class="n">drive_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">drive_path</span><span class="p">,</span> <span class="n">relpath</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.registry.WineRegistry.prefix_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">prefix_path</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#lutris.util.wine.registry.WineRegistry.prefix_path" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the Wine prefix path (where the .reg files are located)</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.registry.WineRegistry.relative_to_header" class="doc doc-heading">
<code class="highlight language-python"><span class="n">relative_to_header</span></code>


<a href="#lutris.util.wine.registry.WineRegistry.relative_to_header" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.registry.WineRegistry.version_header" class="doc doc-heading">
<code class="highlight language-python"><span class="n">version_header</span></code>


<a href="#lutris.util.wine.registry.WineRegistry.version_header" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>






  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistry.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reg_filename</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#lutris.util.wine.registry.WineRegistry.__init__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reg_filename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">arch</span> <span class="o">=</span> <span class="n">WINE_DEFAULT_ARCH</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">relative_to</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\\\\</span><span class="s2">User</span><span class="se">\\\\</span><span class="s2">S-1-5-21-0-0-0-1000&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">keys</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reg_filename</span> <span class="o">=</span> <span class="n">reg_filename</span>
    <span class="k">if</span> <span class="n">reg_filename</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">reg_filename</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;No registry file at </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">reg_filename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parse_reg_file</span><span class="p">(</span><span class="n">reg_filename</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistry.__str__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#lutris.util.wine.registry.WineRegistry.__str__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;Windows Registry @ </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">reg_filename</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistry.clear_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clear_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistry.clear_key" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Removes all subkeys from a key</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">clear_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Removes all subkeys from a key&quot;&quot;&quot;</span>
    <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">key</span><span class="o">.</span><span class="n">subkeys</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistry.clear_subkeys" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clear_subkeys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">keys</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistry.clear_subkeys" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Remove some subkeys from a key</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">clear_subkeys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove some subkeys from a key&quot;&quot;&quot;</span>
    <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">for</span> <span class="n">subkey</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">subkeys</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">subkey</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">key</span><span class="o">.</span><span class="n">subkeys</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">subkey</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistry.get_raw_registry" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_raw_registry</span><span class="p">(</span><span class="n">reg_filename</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#lutris.util.wine.registry.WineRegistry.get_raw_registry" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return an array of the unprocessed contents of a registry file</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_raw_registry</span><span class="p">(</span><span class="n">reg_filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return an array of the unprocessed contents of a registry file&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">reg_filename</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">reg_filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reg_file</span><span class="p">:</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">registry_content</span> <span class="o">=</span> <span class="n">reg_file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>  <span class="c1"># pylint: disable=broad-except</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to registry read </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">reg_filename</span><span class="p">)</span>
            <span class="n">registry_content</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">return</span> <span class="n">registry_content</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistry.get_unix_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_unix_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">windows_path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistry.get_unix_path" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_unix_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">windows_path</span><span class="p">):</span>
    <span class="n">windows_path</span> <span class="o">=</span> <span class="n">windows_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_path</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">drives_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix_path</span><span class="p">,</span> <span class="s2">&quot;dosdevices&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">drives_path</span><span class="p">):</span>
        <span class="k">return</span>
    <span class="n">letter</span><span class="p">,</span> <span class="n">relpath</span> <span class="o">=</span> <span class="n">windows_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">relpath</span> <span class="o">=</span> <span class="n">relpath</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
    <span class="n">drive_link</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">drives_path</span><span class="p">,</span> <span class="n">letter</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">drive_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">readlink</span><span class="p">(</span><span class="n">drive_link</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Unable to read link for </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">drive_link</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">drive_path</span><span class="p">):</span>
        <span class="n">drive_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">drives_path</span><span class="p">,</span> <span class="n">drive_path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">drive_path</span><span class="p">,</span> <span class="n">relpath</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistry.parse_reg_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_reg_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reg_filename</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistry.parse_reg_file" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_reg_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reg_filename</span><span class="p">):</span>
    <span class="n">registry_lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_raw_registry</span><span class="p">(</span><span class="n">reg_filename</span><span class="p">)</span>
    <span class="n">current_key</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">add_next_to_value</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">additional_values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">registry_lines</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">):</span>
            <span class="n">current_key</span> <span class="o">=</span> <span class="n">WineRegistryKey</span><span class="p">(</span><span class="n">key_def</span><span class="o">=</span><span class="n">line</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">[</span><span class="n">current_key</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">current_key</span>
        <span class="k">elif</span> <span class="n">current_key</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">add_next_to_value</span><span class="p">:</span>
                <span class="n">additional_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">add_next_to_value</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">additional_values</span><span class="p">:</span>
                    <span class="n">additional_values</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">additional_values</span><span class="p">)</span>
                    <span class="n">current_key</span><span class="o">.</span><span class="n">add_to_last</span><span class="p">(</span><span class="n">additional_values</span><span class="p">)</span>
                    <span class="n">additional_values</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">current_key</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="n">add_next_to_value</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version_header</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version_header</span><span class="p">):])</span>
        <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relative_to_header</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relative_to</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relative_to_header</span><span class="p">):]</span>
        <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#arch&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">arch</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistry.query" class="doc doc-heading">
<code class="highlight language-python"><span class="n">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">subkey</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistry.query" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">subkey</span><span class="p">):</span>
    <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">key</span><span class="o">.</span><span class="n">get_subkey</span><span class="p">(</span><span class="n">subkey</span><span class="p">)</span>
    <span class="k">return</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistry.render" class="doc doc-heading">
<code class="highlight language-python"><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistry.render" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version_header</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
    <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">{}{}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relative_to_header</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative_to</span><span class="p">)</span>
    <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;#arch=</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">arch</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">:</span>
        <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">content</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">content</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistry.save" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistry.save" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Write the registry to a file</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Write the registry to a file&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reg_filename</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="s2">&quot;No filename provided&quot;</span><span class="p">)</span>
    <span class="n">prefix_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">prefix_path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span>
            <span class="s2">&quot;Invalid Wine prefix path </span><span class="si">%s</span><span class="s2">, make sure to &quot;</span>
            <span class="s2">&quot;create the prefix before saving to a registry&quot;</span> <span class="o">%</span> <span class="n">prefix_path</span>
        <span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">registry_file</span><span class="p">:</span>
        <span class="n">registry_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistry.set_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">subkey</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistry.set_value" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">subkey</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">WineRegistryKey</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span>
    <span class="n">key</span><span class="o">.</span><span class="n">set_subkey</span><span class="p">(</span><span class="n">subkey</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="lutris.util.wine.registry.WineRegistryKey" class="doc doc-heading">
        <code>
WineRegistryKey        </code>



<a href="#lutris.util.wine.registry.WineRegistryKey" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">WineRegistryKey</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_def</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metas</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
            <span class="c1"># Key is created by path, it&#39;s a new key</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">path</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raw_name</span> <span class="o">=</span> <span class="s2">&quot;[</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\\\</span><span class="s2">&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raw_timestamp</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">))</span>

            <span class="n">windows_timestamp</span> <span class="o">=</span> <span class="n">WindowsFileTime</span><span class="o">.</span><span class="n">from_unix_timestamp</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metas</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">windows_timestamp</span><span class="o">.</span><span class="n">to_hex</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Existing key loaded from file</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raw_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_timestamp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(?&lt;=[^</span><span class="se">\\</span><span class="s2">]\]) &quot;</span><span class="p">),</span> <span class="n">key_def</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;[]&quot;</span><span class="p">)</span>

        <span class="c1"># Parse timestamp either as int or float</span>
        <span class="n">ts_parts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_timestamp</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ts_parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ts_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ts_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ts_parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_timestamp</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parse a registry line, populating meta and subkeys&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="c1"># Line is too short, nothing to parse</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_meta</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(?&lt;![^</span><span class="se">\\</span><span class="s2">]</span><span class="se">\\\&quot;</span><span class="s2">)=&quot;</span><span class="p">),</span> <span class="n">line</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Unable to parse line </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">):</span>
            <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">add_to_last</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">last_subkey</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Should this be happening?&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="p">[</span><span class="n">last_subkey</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the content of the key in the wine .reg format&quot;&quot;&quot;</span>
        <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_name</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_timestamp</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metas</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;#</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;#</span><span class="si">{}</span><span class="s2">=</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;@&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">=</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">content</span>

    <span class="k">def</span> <span class="nf">render_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;dword:</span><span class="si">{:08x}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;&quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;TODO&quot;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">decode_unicode</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
        <span class="c1"># There may be a r&quot;\\&quot; in front of r&quot;\x&quot;, so replace the r&quot;\\&quot; to r&quot;\x005c&quot;</span>
        <span class="c1"># to avoid missing matches. Example: r&quot;C:\\users\\x1234\\\x0041\x0042CD&quot;.</span>
        <span class="c1"># Note the difference between r&quot;\\x1234&quot;, r&quot;\\\x0041&quot; and r&quot;\x0042&quot;.</span>
        <span class="c1"># It should be r&quot;C:\users\x1234\ABCD&quot; after decoding.</span>
        <span class="n">chunks</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">x&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\x005c&quot;</span><span class="p">))</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">chunks</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;unicode_escape&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">:</span>
            <span class="c1"># We have seen file with unicode characters escaped on 1 byte (\xfa),</span>
            <span class="c1"># 1.5 bytes (\x444) and 2 bytes (\x00ed). So we try 0 padding, 1 and 2</span>
            <span class="c1"># (python wants its escaped sequence to be exactly on 4 characters).</span>
            <span class="c1"># The exception let us know if it worked or not</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">out</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">u</span><span class="si">{}{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;0&quot;</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="n">chunk</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;unicode_escape&quot;</span><span class="p">))</span>
                    <span class="k">break</span>
                <span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">:</span>
                    <span class="k">pass</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">add_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">meta_line</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">meta_line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Key metas should start with &#39;#&#39;&quot;</span><span class="p">)</span>
        <span class="n">meta_line</span> <span class="o">=</span> <span class="n">meta_line</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="n">meta_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid meta line &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">meta_line</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metas</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">get_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_subkey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_subkey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode_unicode</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;dword:&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">6</span><span class="p">:],</span> <span class="mi">16</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Handle </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistryKey.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_def</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#lutris.util.wine.registry.WineRegistryKey.__init__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_def</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metas</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
        <span class="c1"># Key is created by path, it&#39;s a new key</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw_name</span> <span class="o">=</span> <span class="s2">&quot;[</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\\\</span><span class="s2">&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw_timestamp</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">))</span>

        <span class="n">windows_timestamp</span> <span class="o">=</span> <span class="n">WindowsFileTime</span><span class="o">.</span><span class="n">from_unix_timestamp</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metas</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">windows_timestamp</span><span class="o">.</span><span class="n">to_hex</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Existing key loaded from file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_timestamp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(?&lt;=[^</span><span class="se">\\</span><span class="s2">]\]) &quot;</span><span class="p">),</span> <span class="n">key_def</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;[]&quot;</span><span class="p">)</span>

    <span class="c1"># Parse timestamp either as int or float</span>
    <span class="n">ts_parts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_timestamp</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ts_parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ts_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ts_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ts_parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistryKey.__str__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#lutris.util.wine.registry.WineRegistryKey.__str__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_timestamp</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistryKey.add_meta" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">meta_line</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistryKey.add_meta" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">meta_line</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta_line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Key metas should start with &#39;#&#39;&quot;</span><span class="p">)</span>
    <span class="n">meta_line</span> <span class="o">=</span> <span class="n">meta_line</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">parts</span> <span class="o">=</span> <span class="n">meta_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid meta line &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">meta_line</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metas</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistryKey.add_to_last" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_to_last</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistryKey.add_to_last" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_to_last</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">last_subkey</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Should this be happening?&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="p">[</span><span class="n">last_subkey</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistryKey.decode_unicode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">decode_unicode</span><span class="p">(</span><span class="n">string</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#lutris.util.wine.registry.WineRegistryKey.decode_unicode" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">decode_unicode</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
    <span class="c1"># There may be a r&quot;\\&quot; in front of r&quot;\x&quot;, so replace the r&quot;\\&quot; to r&quot;\x005c&quot;</span>
    <span class="c1"># to avoid missing matches. Example: r&quot;C:\\users\\x1234\\\x0041\x0042CD&quot;.</span>
    <span class="c1"># Note the difference between r&quot;\\x1234&quot;, r&quot;\\\x0041&quot; and r&quot;\x0042&quot;.</span>
    <span class="c1"># It should be r&quot;C:\users\x1234\ABCD&quot; after decoding.</span>
    <span class="n">chunks</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">x&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\x005c&quot;</span><span class="p">))</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">chunks</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;unicode_escape&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">:</span>
        <span class="c1"># We have seen file with unicode characters escaped on 1 byte (\xfa),</span>
        <span class="c1"># 1.5 bytes (\x444) and 2 bytes (\x00ed). So we try 0 padding, 1 and 2</span>
        <span class="c1"># (python wants its escaped sequence to be exactly on 4 characters).</span>
        <span class="c1"># The exception let us know if it worked or not</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">out</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">u</span><span class="si">{}{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;0&quot;</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="n">chunk</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;unicode_escape&quot;</span><span class="p">))</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">:</span>
                <span class="k">pass</span>
    <span class="k">return</span> <span class="n">out</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistryKey.get_meta" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistryKey.get_meta" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistryKey.get_subkey" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_subkey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistryKey.get_subkey" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_subkey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode_unicode</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;dword:&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">6</span><span class="p">:],</span> <span class="mi">16</span><span class="p">)</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Handle </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistryKey.parse" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistryKey.parse" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Parse a registry line, populating meta and subkeys</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Parse a registry line, populating meta and subkeys&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
        <span class="c1"># Line is too short, nothing to parse</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_meta</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(?&lt;![^</span><span class="se">\\</span><span class="s2">]</span><span class="se">\\\&quot;</span><span class="s2">)=&quot;</span><span class="p">),</span> <span class="n">line</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Unable to parse line </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">):</span>
        <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistryKey.render" class="doc doc-heading">
<code class="highlight language-python"><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistryKey.render" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the content of the key in the wine .reg format</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the content of the key in the wine .reg format&quot;&quot;&quot;</span>
    <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_name</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_timestamp</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metas</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;#</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;#</span><span class="si">{}</span><span class="s2">=</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;@&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">=</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">content</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistryKey.render_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">render_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistryKey.render_value" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">render_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;dword:</span><span class="si">{:08x}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;&quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;TODO&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="lutris.util.wine.registry.WineRegistryKey.set_subkey" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_subkey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#lutris.util.wine.registry.WineRegistryKey.set_subkey" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_subkey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">subkeys</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="lutris.util.wine.vkd3d" class="doc doc-heading">
        <code>vkd3d</code>



<a href="#lutris.util.wine.vkd3d" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="lutris.util.wine.vkd3d.VKD3DManager" class="doc doc-heading">
        <code>
VKD3DManager            (<a class="autorefs autorefs-internal" title="lutris.util.wine.dll_manager.DLLManager" href="dll_manager/#lutris.util.wine.dll_manager.DLLManager">DLLManager</a>)
        </code>



<a href="#lutris.util.wine.vkd3d.VKD3DManager" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/vkd3d.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">VKD3DManager</span><span class="p">(</span><span class="n">DLLManager</span><span class="p">):</span>
    <span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;VKD3D&quot;</span>
    <span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">RUNTIME_DIR</span><span class="p">,</span> <span class="s2">&quot;vkd3d&quot;</span><span class="p">)</span>
    <span class="n">versions_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s2">&quot;vkd3d_versions.json&quot;</span><span class="p">)</span>
    <span class="n">managed_dlls</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;d3d12&quot;</span><span class="p">,</span> <span class="p">)</span>
    <span class="n">releases_url</span> <span class="o">=</span> <span class="s2">&quot;https://api.github.com/repos/lutris/vkd3d/releases&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.vkd3d.VKD3DManager.base_dir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">base_dir</span></code>


<a href="#lutris.util.wine.vkd3d.VKD3DManager.base_dir" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.vkd3d.VKD3DManager.component" class="doc doc-heading">
<code class="highlight language-python"><span class="n">component</span></code>


<a href="#lutris.util.wine.vkd3d.VKD3DManager.component" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.vkd3d.VKD3DManager.managed_dlls" class="doc doc-heading">
<code class="highlight language-python"><span class="n">managed_dlls</span></code>


<a href="#lutris.util.wine.vkd3d.VKD3DManager.managed_dlls" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.vkd3d.VKD3DManager.releases_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">releases_url</span></code>


<a href="#lutris.util.wine.vkd3d.VKD3DManager.releases_url" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="lutris.util.wine.vkd3d.VKD3DManager.versions_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">versions_path</span></code>


<a href="#lutris.util.wine.vkd3d.VKD3DManager.versions_path" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>








  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="lutris.util.wine.wine" class="doc doc-heading">
        <code>wine</code>



<a href="#lutris.util.wine.wine" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Utilities for manipulating Wine</p>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.wine.ESYNC_LIMIT_CHECK" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ESYNC_LIMIT_CHECK</span></code>


<a href="#lutris.util.wine.wine.ESYNC_LIMIT_CHECK" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.wine.FSYNC_SUPPORT_CHECK" class="doc doc-heading">
<code class="highlight language-python"><span class="n">FSYNC_SUPPORT_CHECK</span></code>


<a href="#lutris.util.wine.wine.FSYNC_SUPPORT_CHECK" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.wine.POL_PATH" class="doc doc-heading">
<code class="highlight language-python"><span class="n">POL_PATH</span></code>


<a href="#lutris.util.wine.wine.POL_PATH" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.wine.WINE_DEFAULT_ARCH" class="doc doc-heading">
<code class="highlight language-python"><span class="n">WINE_DEFAULT_ARCH</span></code>


<a href="#lutris.util.wine.wine.WINE_DEFAULT_ARCH" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.wine.WINE_DIR" class="doc doc-heading">
<code class="highlight language-python"><span class="n">WINE_DIR</span></code>


<a href="#lutris.util.wine.wine.WINE_DIR" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="lutris.util.wine.wine.WINE_PATHS" class="doc doc-heading">
<code class="highlight language-python"><span class="n">WINE_PATHS</span></code>


<a href="#lutris.util.wine.wine.WINE_PATHS" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

    </div>

  </div>





  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.detect_arch" class="doc doc-heading">
<code class="highlight language-python"><span class="n">detect_arch</span><span class="p">(</span><span class="n">prefix_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wine_path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.detect_arch" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Given a Wine prefix path, return its architecture</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">detect_arch</span><span class="p">(</span><span class="n">prefix_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wine_path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Given a Wine prefix path, return its architecture&quot;&quot;&quot;</span>
    <span class="n">arch</span> <span class="o">=</span> <span class="n">detect_prefix_arch</span><span class="p">(</span><span class="n">prefix_path</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">arch</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">arch</span>
    <span class="k">if</span> <span class="n">wine_path</span> <span class="ow">and</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_path</span> <span class="o">+</span> <span class="s2">&quot;64&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;win64&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;win32&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.detect_prefix_arch" class="doc doc-heading">
<code class="highlight language-python"><span class="n">detect_prefix_arch</span><span class="p">(</span><span class="n">prefix_path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.detect_prefix_arch" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return the architecture of the prefix found in <code>prefix_path</code>.</p>
<p>If no <code>prefix_path</code> given, return the arch of the system's default prefix.
If no prefix found, return None.</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">detect_prefix_arch</span><span class="p">(</span><span class="n">prefix_path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the architecture of the prefix found in `prefix_path`.</span>

<span class="sd">    If no `prefix_path` given, return the arch of the system&#39;s default prefix.</span>
<span class="sd">    If no prefix found, return None.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">prefix_path</span><span class="p">:</span>
        <span class="n">prefix_path</span> <span class="o">=</span> <span class="s2">&quot;~/.wine&quot;</span>
    <span class="n">prefix_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">prefix_path</span><span class="p">)</span>
    <span class="n">registry_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prefix_path</span><span class="p">,</span> <span class="s2">&quot;system.reg&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">prefix_path</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">registry_path</span><span class="p">):</span>
        <span class="c1"># No prefix_path exists or invalid prefix</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Prefix not found: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">prefix_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">registry_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">registry</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">_line_no</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
            <span class="k">if</span> <span class="s2">&quot;win64&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;win64&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;win32&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;win32&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to detect Wine prefix architecture in </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">prefix_path</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.display_vulkan_error" class="doc doc-heading">
<code class="highlight language-python"><span class="n">display_vulkan_error</span><span class="p">(</span><span class="n">on_launch</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.display_vulkan_error" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">display_vulkan_error</span><span class="p">(</span><span class="n">on_launch</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">on_launch</span><span class="p">:</span>
        <span class="n">checkbox_message</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Launch anyway and do not show this message again.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">checkbox_message</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Enable anyway and do not show this message again.&quot;</span><span class="p">)</span>

    <span class="n">setting</span> <span class="o">=</span> <span class="s2">&quot;hide-no-vulkan-warning&quot;</span>
    <span class="n">DontShowAgainDialog</span><span class="p">(</span>
        <span class="n">setting</span><span class="p">,</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Vulkan is not installed or is not supported by your system&quot;</span><span class="p">),</span>
        <span class="n">secondary_message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span>
            <span class="s2">&quot;If you have compatible hardware, please follow &quot;</span>
            <span class="s2">&quot;the installation procedures as described in</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;&lt;a href=&#39;https://github.com/lutris/lutris/wiki/How-to:-DXVK&#39;&gt;&quot;</span>
            <span class="s2">&quot;How-to:-DXVK (https://github.com/lutris/lutris/wiki/How-to:-DXVK)&lt;/a&gt;&quot;</span>
        <span class="p">),</span>
        <span class="n">checkbox_message</span><span class="o">=</span><span class="n">checkbox_message</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">read_setting</span><span class="p">(</span><span class="n">setting</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.esync_display_limit_warning" class="doc doc-heading">
<code class="highlight language-python"><span class="n">esync_display_limit_warning</span><span class="p">()</span></code>


<a href="#lutris.util.wine.wine.esync_display_limit_warning" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">esync_display_limit_warning</span><span class="p">():</span>
    <span class="n">ErrorDialog</span><span class="p">(</span><span class="n">_</span><span class="p">(</span>
        <span class="s2">&quot;Your limits are not set correctly.&quot;</span>
        <span class="s2">&quot; Please increase them as described here:&quot;</span>
        <span class="s2">&quot; &lt;a href=&#39;https://github.com/lutris/lutris/wiki/How-to:-Esync&#39;&gt;&quot;</span>
        <span class="s2">&quot;How-to:-Esync (https://github.com/lutris/lutris/wiki/How-to:-Esync)&lt;/a&gt;&quot;</span>
    <span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.esync_display_version_warning" class="doc doc-heading">
<code class="highlight language-python"><span class="n">esync_display_version_warning</span><span class="p">(</span><span class="n">on_launch</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.esync_display_version_warning" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">esync_display_version_warning</span><span class="p">(</span><span class="n">on_launch</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">setting</span> <span class="o">=</span> <span class="s2">&quot;hide-wine-non-esync-version-warning&quot;</span>
    <span class="k">if</span> <span class="n">on_launch</span><span class="p">:</span>
        <span class="n">checkbox_message</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Launch anyway and do not show this message again.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">checkbox_message</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Enable anyway and do not show this message again.&quot;</span><span class="p">)</span>

    <span class="n">DontShowAgainDialog</span><span class="p">(</span>
        <span class="n">setting</span><span class="p">,</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Incompatible Wine version detected&quot;</span><span class="p">),</span>
        <span class="n">secondary_message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span>
            <span class="s2">&quot;The Wine build you have selected &quot;</span>
            <span class="s2">&quot;does not support Esync.</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;Please switch to an Esync-capable version.&quot;</span>
        <span class="p">),</span>
        <span class="n">checkbox_message</span><span class="o">=</span><span class="n">checkbox_message</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">read_setting</span><span class="p">(</span><span class="n">setting</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.fsync_display_support_warning" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fsync_display_support_warning</span><span class="p">()</span></code>


<a href="#lutris.util.wine.wine.fsync_display_support_warning" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">fsync_display_support_warning</span><span class="p">():</span>
    <span class="n">ErrorDialog</span><span class="p">(</span><span class="n">_</span><span class="p">(</span>
        <span class="s2">&quot;Your kernel is not patched for fsync.&quot;</span>
        <span class="s2">&quot; Please get a patched kernel to use fsync.&quot;</span>
    <span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.fsync_display_version_warning" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fsync_display_version_warning</span><span class="p">(</span><span class="n">on_launch</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.fsync_display_version_warning" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">fsync_display_version_warning</span><span class="p">(</span><span class="n">on_launch</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">setting</span> <span class="o">=</span> <span class="s2">&quot;hide-wine-non-fsync-version-warning&quot;</span>
    <span class="k">if</span> <span class="n">on_launch</span><span class="p">:</span>
        <span class="n">checkbox_message</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Launch anyway and do not show this message again.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">checkbox_message</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Enable anyway and do not show this message again.&quot;</span><span class="p">)</span>

    <span class="n">DontShowAgainDialog</span><span class="p">(</span>
        <span class="n">setting</span><span class="p">,</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Incompatible Wine version detected&quot;</span><span class="p">),</span>
        <span class="n">secondary_message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span>
            <span class="s2">&quot;The Wine build you have selected &quot;</span>
            <span class="s2">&quot;does not support Fsync.</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;Please switch to an Fsync-capable version.&quot;</span>
        <span class="p">),</span>
        <span class="n">checkbox_message</span><span class="o">=</span><span class="n">checkbox_message</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">read_setting</span><span class="p">(</span><span class="n">setting</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.get_default_version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_default_version</span><span class="p">()</span></code>


<a href="#lutris.util.wine.wine.get_default_version" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return the default version of wine. Prioritize 64bit builds</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_default_version</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Return the default version of wine. Prioritize 64bit builds&quot;&quot;&quot;</span>
    <span class="n">installed_versions</span> <span class="o">=</span> <span class="n">get_wine_versions</span><span class="p">()</span>
    <span class="n">wine64_versions</span> <span class="o">=</span> <span class="p">[</span><span class="n">version</span> <span class="k">for</span> <span class="n">version</span> <span class="ow">in</span> <span class="n">installed_versions</span> <span class="k">if</span> <span class="s2">&quot;64&quot;</span> <span class="ow">in</span> <span class="n">version</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">wine64_versions</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">wine64_versions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">installed_versions</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">installed_versions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.get_lutris_wine_versions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_lutris_wine_versions</span><span class="p">()</span></code>


<a href="#lutris.util.wine.wine.get_lutris_wine_versions" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return the list of wine versions installed by lutris</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_lutris_wine_versions</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Return the list of wine versions installed by lutris&quot;&quot;&quot;</span>
    <span class="n">versions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">WINE_DIR</span><span class="p">):</span>
        <span class="n">dirs</span> <span class="o">=</span> <span class="n">version_sort</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">WINE_DIR</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">dirname</span> <span class="ow">in</span> <span class="n">dirs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">is_version_installed</span><span class="p">(</span><span class="n">dirname</span><span class="p">):</span>
                <span class="n">versions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dirname</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">versions</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.get_overrides_env" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_overrides_env</span><span class="p">(</span><span class="n">overrides</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.get_overrides_env" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Output a string of dll overrides usable with WINEDLLOVERRIDES
See: <a href="https://wiki.winehq.org/Wine_User%27s_Guide#WINEDLLOVERRIDES.3DDLL_Overrides">https://wiki.winehq.org/Wine_User%27s_Guide#WINEDLLOVERRIDES.3DDLL_Overrides</a></p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_overrides_env</span><span class="p">(</span><span class="n">overrides</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Output a string of dll overrides usable with WINEDLLOVERRIDES</span>
<span class="sd">    See: https://wiki.winehq.org/Wine_User%27s_Guide#WINEDLLOVERRIDES.3DDLL_Overrides</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">default_overrides</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;winemenubuilder&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">}</span>
    <span class="n">overrides</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">default_overrides</span><span class="p">)</span>
    <span class="n">override_buckets</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s2">&quot;n,b&quot;</span><span class="p">,</span> <span class="p">[]),</span> <span class="p">(</span><span class="s2">&quot;b,n&quot;</span><span class="p">,</span> <span class="p">[]),</span> <span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="p">[]),</span> <span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="p">[]),</span> <span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="p">[]),</span> <span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="p">[])])</span>
    <span class="k">for</span> <span class="n">dll</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">overrides</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;builtin&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;native&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">override_buckets</span><span class="p">[</span><span class="n">value</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dll</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Invalid override value </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">continue</span>

    <span class="n">override_strings</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">value</span><span class="p">,</span> <span class="n">dlls</span> <span class="ow">in</span> <span class="n">override_buckets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">dlls</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">override_strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">dlls</span><span class="p">)),</span> <span class="n">value</span><span class="p">))</span>
    <span class="k">return</span> <span class="s2">&quot;;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">override_strings</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.get_playonlinux" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_playonlinux</span><span class="p">()</span></code>


<a href="#lutris.util.wine.wine.get_playonlinux" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return the folder containing PoL config files</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_playonlinux</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Return the folder containing PoL config files&quot;&quot;&quot;</span>
    <span class="n">pol_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~/.PlayOnLinux&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pol_path</span><span class="p">,</span> <span class="s2">&quot;wine&quot;</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">pol_path</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.get_pol_wine_versions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pol_wine_versions</span><span class="p">()</span></code>


<a href="#lutris.util.wine.wine.get_pol_wine_versions" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return the list of wine versions installed by Play on Linux</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_pol_wine_versions</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Return the list of wine versions installed by Play on Linux&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">POL_PATH</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="n">versions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">arch</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x86&#39;</span><span class="p">,</span> <span class="s1">&#39;amd64&#39;</span><span class="p">]:</span>
        <span class="n">builds_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">POL_PATH</span><span class="p">,</span> <span class="s2">&quot;wine/linux-</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">arch</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">builds_path</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="k">for</span> <span class="n">version</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">builds_path</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">builds_path</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="s2">&quot;bin/wine&quot;</span><span class="p">)):</span>
                <span class="n">versions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;PlayOnLinux </span><span class="si">%s</span><span class="s2">-</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">version</span><span class="p">,</span> <span class="n">arch</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">versions</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.get_proton_paths" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_proton_paths</span><span class="p">()</span></code>


<a href="#lutris.util.wine.wine.get_proton_paths" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Get the Folder that contains all the Proton versions. Can probably be improved</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_proton_paths</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Get the Folder that contains all the Proton versions. Can probably be improved&quot;&quot;&quot;</span>
    <span class="n">paths</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">_iter_proton_locations</span><span class="p">():</span>
        <span class="n">proton_versions</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;Proton&quot;</span> <span class="ow">in</span> <span class="n">p</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">version</span> <span class="ow">in</span> <span class="n">proton_versions</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="s2">&quot;dist/bin/wine&quot;</span><span class="p">)):</span>
                <span class="n">paths</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.get_proton_versions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_proton_versions</span><span class="p">()</span></code>


<a href="#lutris.util.wine.wine.get_proton_versions" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return the list of Proton versions installed in Steam</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_proton_versions</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Return the list of Proton versions installed in Steam&quot;&quot;&quot;</span>
    <span class="n">versions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">proton_path</span> <span class="ow">in</span> <span class="n">get_proton_paths</span><span class="p">():</span>
        <span class="n">proton_versions</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">proton_path</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;Proton&quot;</span> <span class="ow">in</span> <span class="n">p</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">version</span> <span class="ow">in</span> <span class="n">proton_versions</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">proton_path</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="s2">&quot;dist/bin/wine&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
                <span class="n">versions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">versions</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.get_real_executable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_real_executable</span><span class="p">(</span><span class="n">windows_executable</span><span class="p">,</span> <span class="n">working_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.get_real_executable" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Given a Windows executable, return the real program
capable of launching it along with necessary arguments.</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_real_executable</span><span class="p">(</span><span class="n">windows_executable</span><span class="p">,</span> <span class="n">working_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Given a Windows executable, return the real program</span>
<span class="sd">    capable of launching it along with necessary arguments.&quot;&quot;&quot;</span>

    <span class="n">exec_name</span> <span class="o">=</span> <span class="n">windows_executable</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">exec_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.msi&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;msiexec&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;/i&quot;</span><span class="p">,</span> <span class="n">windows_executable</span><span class="p">],</span> <span class="n">working_dir</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">exec_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.bat&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">working_dir</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">windows_executable</span><span class="p">)</span> <span class="o">==</span> <span class="n">working_dir</span><span class="p">:</span>
            <span class="n">working_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">windows_executable</span><span class="p">)</span> <span class="ow">or</span> <span class="kc">None</span>
            <span class="n">windows_executable</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">windows_executable</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;cmd&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;/C&quot;</span><span class="p">,</span> <span class="n">windows_executable</span><span class="p">],</span> <span class="n">working_dir</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">exec_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.lnk&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;/unix&quot;</span><span class="p">,</span> <span class="n">windows_executable</span><span class="p">],</span> <span class="n">working_dir</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">windows_executable</span><span class="p">,</span> <span class="p">[],</span> <span class="n">working_dir</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.get_system_wine_versions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_system_wine_versions</span><span class="p">()</span></code>


<a href="#lutris.util.wine.wine.get_system_wine_versions" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return the list of wine versions installed on the system</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_system_wine_versions</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Return the list of wine versions installed on the system&quot;&quot;&quot;</span>
    <span class="n">versions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">build</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">WINE_PATHS</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="n">version</span> <span class="o">=</span> <span class="n">get_wine_version</span><span class="p">(</span><span class="n">WINE_PATHS</span><span class="p">[</span><span class="n">build</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">version</span><span class="p">:</span>
            <span class="n">versions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">build</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">versions</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.get_wine_version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_wine_version</span><span class="p">(</span><span class="n">wine_path</span><span class="o">=</span><span class="s1">&#39;wine&#39;</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.get_wine_version" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return the version of Wine installed on the system.</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_wine_version</span><span class="p">(</span><span class="n">wine_path</span><span class="o">=</span><span class="s2">&quot;wine&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the version of Wine installed on the system.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">wine_path</span> <span class="o">!=</span> <span class="s2">&quot;wine&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">wine_path</span><span class="p">):</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">wine_path</span> <span class="o">==</span> <span class="s2">&quot;wine&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">find_executable</span><span class="p">(</span><span class="s2">&quot;wine&quot;</span><span class="p">):</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">wine_path</span><span class="p">):</span>
        <span class="n">wine_stats</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">wine_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">wine_stats</span><span class="o">.</span><span class="n">st_size</span> <span class="o">&lt;</span> <span class="mi">2000</span><span class="p">:</span>
            <span class="c1"># This version is a script, ignore it</span>
            <span class="k">return</span>
    <span class="n">version</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">read_process_output</span><span class="p">([</span><span class="n">wine_path</span><span class="p">,</span> <span class="s2">&quot;--version&quot;</span><span class="p">])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">version</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error reading wine version for </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">wine_path</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">version</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;wine-&quot;</span><span class="p">):</span>
        <span class="n">version</span> <span class="o">=</span> <span class="n">version</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span>
    <span class="k">return</span> <span class="n">version</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.get_wine_version_exe" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_wine_version_exe</span><span class="p">(</span><span class="n">version</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.get_wine_version_exe" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_wine_version_exe</span><span class="p">(</span><span class="n">version</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">version</span><span class="p">:</span>
        <span class="n">version</span> <span class="o">=</span> <span class="n">get_default_version</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">version</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Wine is not installed&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">WINE_DIR</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/bin/wine&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">version</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.get_wine_versions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_wine_versions</span><span class="p">()</span></code>


<a href="#lutris.util.wine.wine.get_wine_versions" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return the list of Wine versions installed</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_wine_versions</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Return the list of Wine versions installed&quot;&quot;&quot;</span>
    <span class="n">versions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">versions</span> <span class="o">+=</span> <span class="n">get_system_wine_versions</span><span class="p">()</span>
    <span class="n">versions</span> <span class="o">+=</span> <span class="n">get_lutris_wine_versions</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;LUTRIS_ENABLE_PROTON&quot;</span><span class="p">):</span>
        <span class="n">versions</span> <span class="o">+=</span> <span class="n">get_proton_versions</span><span class="p">()</span>
    <span class="n">versions</span> <span class="o">+=</span> <span class="n">get_pol_wine_versions</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">versions</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.is_esync_limit_set" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_esync_limit_set</span><span class="p">()</span></code>


<a href="#lutris.util.wine.wine.is_esync_limit_set" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Checks if the number of files open is acceptable for esync usage.</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_esync_limit_set</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Checks if the number of files open is acceptable for esync usage.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">ESYNC_LIMIT_CHECK</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;off&quot;</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;fd limit check for esync was manually disabled&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="n">linux</span><span class="o">.</span><span class="n">LINUX_SYSTEM</span><span class="o">.</span><span class="n">has_enough_file_descriptors</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.is_fsync_supported" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_fsync_supported</span><span class="p">()</span></code>


<a href="#lutris.util.wine.wine.is_fsync_supported" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Checks if the running kernel has Valve's futex patch applied.</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_fsync_supported</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Checks if the running kernel has Valve&#39;s futex patch applied.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">FSYNC_SUPPORT_CHECK</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;off&quot;</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;futex patch check for fsync was manually disabled&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="n">fsync</span><span class="o">.</span><span class="n">is_fsync_supported</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.is_gstreamer_build" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_gstreamer_build</span><span class="p">(</span><span class="n">wine_path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.is_gstreamer_build" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns whether a wine build ships with gstreamer libraries.
This allows to set GST_PLUGIN_SYSTEM_PATH_1_0 for the builds that support it.</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_gstreamer_build</span><span class="p">(</span><span class="n">wine_path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns whether a wine build ships with gstreamer libraries.</span>
<span class="sd">    This allows to set GST_PLUGIN_SYSTEM_PATH_1_0 for the builds that support it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">base_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">wine_path</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;lib64/gstreamer-1.0&quot;</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.is_installed_systemwide" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_installed_systemwide</span><span class="p">()</span></code>


<a href="#lutris.util.wine.wine.is_installed_systemwide" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return whether Wine is installed outside of Lutris</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_installed_systemwide</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Return whether Wine is installed outside of Lutris&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">build</span> <span class="ow">in</span> <span class="n">WINE_PATHS</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">find_executable</span><span class="p">(</span><span class="n">build</span><span class="p">):</span>
            <span class="c1"># if wine64 is installed but not wine32, don&#39;t consider it</span>
            <span class="c1"># a system-wide installation.</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">build</span> <span class="o">==</span> <span class="s2">&quot;wine&quot;</span> <span class="ow">and</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="s2">&quot;/usr/lib/wine/wine64&quot;</span><span class="p">)</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="s2">&quot;/usr/lib/wine/wine&quot;</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;wine32 is missing from system&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.is_mingw_build" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_mingw_build</span><span class="p">(</span><span class="n">wine_path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.is_mingw_build" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns whether a wine build is built with MingW</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_mingw_build</span><span class="p">(</span><span class="n">wine_path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns whether a wine build is built with MingW&quot;&quot;&quot;</span>
    <span class="n">base_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">wine_path</span><span class="p">))</span>
    <span class="c1"># A MingW build has an .exe file while a GCC one will have a .so</span>
    <span class="k">return</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;lib/wine/iexplore.exe&quot;</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.is_version_esync" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_version_esync</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.is_version_esync" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Determines if a Wine build is Esync capable</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>path</code></td>
        <td></td>
        <td><p>the path to the Wine version</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True is the build is Esync capable</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_version_esync</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Determines if a Wine build is Esync capable</span>

<span class="sd">    Params:</span>
<span class="sd">        path: the path to the Wine version</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True is the build is Esync capable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">version</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Invalid path &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">_version_number</span><span class="p">,</span> <span class="n">version_prefix</span><span class="p">,</span> <span class="n">version_suffix</span> <span class="o">=</span> <span class="n">parse_version</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
    <span class="n">esync_compatible_versions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;esync&quot;</span><span class="p">,</span> <span class="s2">&quot;lutris&quot;</span><span class="p">,</span> <span class="s2">&quot;tkg&quot;</span><span class="p">,</span> <span class="s2">&quot;ge&quot;</span><span class="p">,</span> <span class="s2">&quot;proton&quot;</span><span class="p">,</span> <span class="s2">&quot;staging&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">esync_version</span> <span class="ow">in</span> <span class="n">esync_compatible_versions</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">esync_version</span> <span class="ow">in</span> <span class="n">version</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="n">wine_version</span> <span class="o">=</span> <span class="n">get_wine_version</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">wine_version</span><span class="p">:</span>
        <span class="n">wine_version</span> <span class="o">=</span> <span class="n">wine_version</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">return</span> <span class="s2">&quot;esync&quot;</span> <span class="ow">in</span> <span class="n">wine_version</span> <span class="ow">or</span> <span class="s2">&quot;staging&quot;</span> <span class="ow">in</span> <span class="n">wine_version</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.is_version_fsync" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_version_fsync</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.is_version_fsync" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Determines if a Wine build is Fsync capable</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>path</code></td>
        <td></td>
        <td><p>the path to the Wine version</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True is the build is Fsync capable</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_version_fsync</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Determines if a Wine build is Fsync capable</span>

<span class="sd">    Params:</span>
<span class="sd">        path: the path to the Wine version</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True is the build is Fsync capable</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">version</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Invalid path &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">_version_number</span><span class="p">,</span> <span class="n">version_prefix</span><span class="p">,</span> <span class="n">version_suffix</span> <span class="o">=</span> <span class="n">parse_version</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
    <span class="n">fsync_compatible_versions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;fsync&quot;</span><span class="p">,</span> <span class="s2">&quot;lutris&quot;</span><span class="p">,</span> <span class="s2">&quot;ge&quot;</span><span class="p">,</span> <span class="s2">&quot;proton&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">fsync_version</span> <span class="ow">in</span> <span class="n">fsync_compatible_versions</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">fsync_version</span> <span class="ow">in</span> <span class="n">version</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="n">wine_version</span> <span class="o">=</span> <span class="n">get_wine_version</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">wine_version</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;fsync&quot;</span> <span class="ow">in</span> <span class="n">wine_version</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.is_version_installed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_version_installed</span><span class="p">(</span><span class="n">version</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.is_version_installed" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_version_installed</span><span class="p">(</span><span class="n">version</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">get_wine_version_exe</span><span class="p">(</span><span class="n">version</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.set_drive_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_drive_path</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">letter</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.set_drive_path" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Changes the path to a Wine drive</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_drive_path</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">letter</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Changes the path to a Wine drive&quot;&quot;&quot;</span>
    <span class="n">dosdevices_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="s2">&quot;dosdevices&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">dosdevices_path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="s2">&quot;Invalid prefix path </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">prefix</span><span class="p">)</span>
    <span class="n">drive_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dosdevices_path</span><span class="p">,</span> <span class="n">letter</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">system</span><span class="o">.</span><span class="n">path_exists</span><span class="p">(</span><span class="n">drive_path</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">drive_path</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Linking </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">drive_path</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">symlink</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">drive_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="lutris.util.wine.wine.use_lutris_runtime" class="doc doc-heading">
<code class="highlight language-python"><span class="n">use_lutris_runtime</span><span class="p">(</span><span class="n">wine_path</span><span class="p">,</span> <span class="n">force_disable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#lutris.util.wine.wine.use_lutris_runtime" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns whether to use the Lutris runtime.
The runtime can be forced to be disabled, otherwise it's disabled
automatically if Wine is installed system wide.</p>

        <details class="quote">
          <summary>Source code in <code>lutris/util/wine/wine.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">use_lutris_runtime</span><span class="p">(</span><span class="n">wine_path</span><span class="p">,</span> <span class="n">force_disable</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns whether to use the Lutris runtime.</span>
<span class="sd">    The runtime can be forced to be disabled, otherwise it&#39;s disabled</span>
<span class="sd">    automatically if Wine is installed system wide.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">force_disable</span> <span class="ow">or</span> <span class="n">runtime</span><span class="o">.</span><span class="n">RUNTIME_DISABLED</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Runtime is forced disabled&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">WINE_DIR</span> <span class="ow">in</span> <span class="n">wine_path</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> is provided by Lutris, using runtime&quot;</span><span class="p">,</span> <span class="n">wine_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="n">is_installed_systemwide</span><span class="p">():</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Using system wine version, not using runtime&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Using Lutris runtime for wine&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>




  </div>

    </div>

  </div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../urlhandler/" class="md-footer__link md-footer__link--prev" aria-label="Previous: urlhandler" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              urlhandler
            </div>
          </div>
        </a>
      
      
        
        <a href="cabinstall/" class="md-footer__link md-footer__link--next" aria-label="Next: cabinstall" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              cabinstall
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.467223ff.min.js"></script>
      
    
  </body>
</html>